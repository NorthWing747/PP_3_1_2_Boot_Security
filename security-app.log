2025-10-04 07:07:46.277  INFO 7512 --- [main] d.SpringBootSecurityDemoApplicationTests : Starting SpringBootSecurityDemoApplicationTests using Java 23 on Base with PID 7512 (started by Anton in C:\Users\Антон\IdeaProjects\Lesson\Spring_Zaur\PP_3_1_2_Boot_Security)
2025-10-04 07:07:46.281 DEBUG 7512 --- [main] d.SpringBootSecurityDemoApplicationTests : Running with Spring Boot v2.6.2, Spring v5.3.14
2025-10-04 07:07:46.282  INFO 7512 --- [main] d.SpringBootSecurityDemoApplicationTests : No active profile set, falling back to default profiles: default
2025-10-04 07:07:46.313 DEBUG 7512 --- [main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@7997b197
2025-10-04 07:07:46.774  INFO 7512 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-10-04 07:07:46.816  INFO 7512 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 35 ms. Found 2 JPA repository interfaces.
2025-10-04 07:07:47.192  INFO 7512 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-10-04 07:07:47.232  INFO 7512 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 5.6.3.Final
2025-10-04 07:07:47.350  INFO 7512 --- [main] o.hibernate.annotations.common.Version   : HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2025-10-04 07:07:47.433  INFO 7512 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-10-04 07:07:47.577  INFO 7512 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-10-04 07:07:47.590  INFO 7512 --- [main] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL8Dialect
2025-10-04 07:07:48.034  INFO 7512 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2025-10-04 07:07:48.040  INFO 7512 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-10-04 07:07:48.076  WARN 7512 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-10-04 07:07:48.357  INFO 7512 --- [main] r.k.s.b.demo.service.UserServiceImpl     : UserServiceImpl инициализирован
2025-10-04 07:07:48.359 DEBUG 7512 --- [main] r.k.s.b.demo.service.UserServiceImpl     : Проверка пользователей без ролей...
2025-10-04 07:07:48.442 DEBUG 7512 --- [main] org.hibernate.SQL                        : 
    select
        user0_.id as id1_2_,
        user0_.age as age2_2_,
        user0_.email as email3_2_,
        user0_.name as name4_2_,
        user0_.password as password5_2_,
        user0_.surname as surname6_2_,
        user0_.username as username7_2_ 
    from
        users user0_
2025-10-04 07:07:48.461 DEBUG 7512 --- [main] org.hibernate.SQL                        : 
    select
        roles0_.user_id as user_id1_1_0_,
        roles0_.role_id as role_id2_1_0_,
        role1_.id as id1_0_1_,
        role1_.name as name2_0_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-10-04 07:07:48.462 TRACE 7512 --- [main] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [20]
2025-10-04 07:07:48.469 DEBUG 7512 --- [main] org.hibernate.SQL                        : 
    select
        roles0_.user_id as user_id1_1_0_,
        roles0_.role_id as role_id2_1_0_,
        role1_.id as id1_0_1_,
        role1_.name as name2_0_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-10-04 07:07:48.469 TRACE 7512 --- [main] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [18]
2025-10-04 07:07:48.470 DEBUG 7512 --- [main] org.hibernate.SQL                        : 
    select
        roles0_.user_id as user_id1_1_0_,
        roles0_.role_id as role_id2_1_0_,
        role1_.id as id1_0_1_,
        role1_.name as name2_0_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-10-04 07:07:48.470 TRACE 7512 --- [main] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [17]
2025-10-04 07:07:48.471 DEBUG 7512 --- [main] org.hibernate.SQL                        : 
    select
        roles0_.user_id as user_id1_1_0_,
        roles0_.role_id as role_id2_1_0_,
        role1_.id as id1_0_1_,
        role1_.name as name2_0_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-10-04 07:07:48.471 TRACE 7512 --- [main] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [15]
2025-10-04 07:07:48.472 DEBUG 7512 --- [main] org.hibernate.SQL                        : 
    select
        roles0_.user_id as user_id1_1_0_,
        roles0_.role_id as role_id2_1_0_,
        role1_.id as id1_0_1_,
        role1_.name as name2_0_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-10-04 07:07:48.472 TRACE 7512 --- [main] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [14]
2025-10-04 07:07:48.473 DEBUG 7512 --- [main] org.hibernate.SQL                        : 
    select
        roles0_.user_id as user_id1_1_0_,
        roles0_.role_id as role_id2_1_0_,
        role1_.id as id1_0_1_,
        role1_.name as name2_0_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-10-04 07:07:48.473 TRACE 7512 --- [main] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [13]
2025-10-04 07:07:48.497 DEBUG 7512 --- [main] org.hibernate.SQL                        : 
    select
        role0_.id as id1_0_,
        role0_.name as name2_0_ 
    from
        roles role0_ 
    where
        role0_.name=?
2025-10-04 07:07:48.497 TRACE 7512 --- [main] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [VARCHAR] - [ROLE_USER]
2025-10-04 07:07:48.499 DEBUG 7512 --- [main] r.k.s.b.demo.service.UserServiceImpl     : Пользователи без ролей не найдены
2025-10-04 07:07:48.500  INFO 7512 --- [main] r.k.s.b.demo.service.UserServiceImpl     : Начало инициализации тестовых данных...
2025-10-04 07:07:48.500 DEBUG 7512 --- [main] org.hibernate.SQL                        : 
    select
        role0_.id as id1_0_,
        role0_.name as name2_0_ 
    from
        roles role0_ 
    where
        role0_.name=?
2025-10-04 07:07:48.500 TRACE 7512 --- [main] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [VARCHAR] - [ROLE_USER]
2025-10-04 07:07:48.502 DEBUG 7512 --- [main] org.hibernate.SQL                        : 
    select
        role0_.id as id1_0_,
        role0_.name as name2_0_ 
    from
        roles role0_ 
    where
        role0_.name=?
2025-10-04 07:07:48.502 TRACE 7512 --- [main] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [VARCHAR] - [ROLE_ADMIN]
2025-10-04 07:07:48.506 DEBUG 7512 --- [main] org.hibernate.SQL                        : 
    select
        user0_.id as col_0_0_ 
    from
        users user0_ 
    where
        user0_.username=? limit ?
2025-10-04 07:07:48.506 TRACE 7512 --- [main] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [VARCHAR] - [user]
2025-10-04 07:07:48.508 DEBUG 7512 --- [main] r.k.s.b.demo.service.UserServiceImpl     : Тестовый пользователь 'user' уже существует
2025-10-04 07:07:48.508 DEBUG 7512 --- [main] org.hibernate.SQL                        : 
    select
        user0_.id as col_0_0_ 
    from
        users user0_ 
    where
        user0_.username=? limit ?
2025-10-04 07:07:48.508 TRACE 7512 --- [main] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [VARCHAR] - [admin]
2025-10-04 07:07:48.509 DEBUG 7512 --- [main] r.k.s.b.demo.service.UserServiceImpl     : Тестовый администратор 'admin' уже существует
2025-10-04 07:07:48.509 DEBUG 7512 --- [main] r.k.s.b.demo.service.UserServiceImpl     : Проверка пользователей без ролей...
2025-10-04 07:07:48.510 DEBUG 7512 --- [main] org.hibernate.SQL                        : 
    select
        user0_.id as id1_2_,
        user0_.age as age2_2_,
        user0_.email as email3_2_,
        user0_.name as name4_2_,
        user0_.password as password5_2_,
        user0_.surname as surname6_2_,
        user0_.username as username7_2_ 
    from
        users user0_
2025-10-04 07:07:48.512 DEBUG 7512 --- [main] org.hibernate.SQL                        : 
    select
        roles0_.user_id as user_id1_1_0_,
        roles0_.role_id as role_id2_1_0_,
        role1_.id as id1_0_1_,
        role1_.name as name2_0_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-10-04 07:07:48.512 TRACE 7512 --- [main] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [20]
2025-10-04 07:07:48.513 DEBUG 7512 --- [main] org.hibernate.SQL                        : 
    select
        roles0_.user_id as user_id1_1_0_,
        roles0_.role_id as role_id2_1_0_,
        role1_.id as id1_0_1_,
        role1_.name as name2_0_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-10-04 07:07:48.513 TRACE 7512 --- [main] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [18]
2025-10-04 07:07:48.514 DEBUG 7512 --- [main] org.hibernate.SQL                        : 
    select
        roles0_.user_id as user_id1_1_0_,
        roles0_.role_id as role_id2_1_0_,
        role1_.id as id1_0_1_,
        role1_.name as name2_0_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-10-04 07:07:48.514 TRACE 7512 --- [main] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [17]
2025-10-04 07:07:48.515 DEBUG 7512 --- [main] org.hibernate.SQL                        : 
    select
        roles0_.user_id as user_id1_1_0_,
        roles0_.role_id as role_id2_1_0_,
        role1_.id as id1_0_1_,
        role1_.name as name2_0_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-10-04 07:07:48.515 TRACE 7512 --- [main] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [15]
2025-10-04 07:07:48.516 DEBUG 7512 --- [main] org.hibernate.SQL                        : 
    select
        roles0_.user_id as user_id1_1_0_,
        roles0_.role_id as role_id2_1_0_,
        role1_.id as id1_0_1_,
        role1_.name as name2_0_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-10-04 07:07:48.516 TRACE 7512 --- [main] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [14]
2025-10-04 07:07:48.517 DEBUG 7512 --- [main] org.hibernate.SQL                        : 
    select
        roles0_.user_id as user_id1_1_0_,
        roles0_.role_id as role_id2_1_0_,
        role1_.id as id1_0_1_,
        role1_.name as name2_0_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-10-04 07:07:48.517 TRACE 7512 --- [main] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [13]
2025-10-04 07:07:48.519 DEBUG 7512 --- [main] org.hibernate.SQL                        : 
    select
        role0_.id as id1_0_,
        role0_.name as name2_0_ 
    from
        roles role0_ 
    where
        role0_.name=?
2025-10-04 07:07:48.519 TRACE 7512 --- [main] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [VARCHAR] - [ROLE_USER]
2025-10-04 07:07:48.520 DEBUG 7512 --- [main] r.k.s.b.demo.service.UserServiceImpl     : Пользователи без ролей не найдены
2025-10-04 07:07:48.520  INFO 7512 --- [main] r.k.s.b.demo.service.UserServiceImpl     : Инициализация тестовых данных завершена успешно
2025-10-04 07:07:48.666  INFO 7512 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5b74bb75, org.springframework.security.web.context.SecurityContextPersistenceFilter@4ddb9a8, org.springframework.security.web.header.HeaderWriterFilter@5cc152f9, org.springframework.security.web.csrf.CsrfFilter@3fa50a24, org.springframework.security.web.authentication.logout.LogoutFilter@53016c98, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@54780c40, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@5002be8e, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@6f740044, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@675bf541, org.springframework.security.web.session.SessionManagementFilter@1117cc7c, org.springframework.security.web.access.ExceptionTranslationFilter@663f24e6, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@779448b8]
2025-10-04 07:07:48.885 DEBUG 7512 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-10-04 07:07:48.935 DEBUG 7512 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 9 mappings in 'requestMappingHandlerMapping'
2025-10-04 07:07:48.938  INFO 7512 --- [main] o.s.b.a.w.s.WelcomePageHandlerMapping    : Adding welcome page template: index
2025-10-04 07:07:48.954 DEBUG 7512 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/, /user, /admin, /login, /access-denied] in 'viewControllerHandlerMapping'
2025-10-04 07:07:48.969 DEBUG 7512 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-10-04 07:07:48.979 DEBUG 7512 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-10-04 07:07:49.127  INFO 7512 --- [main] d.SpringBootSecurityDemoApplicationTests : Started SpringBootSecurityDemoApplicationTests in 3.046 seconds (JVM running for 3.664)
2025-10-04 07:07:49.206 DEBUG 7512 --- [SpringApplicationShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@7997b197, started on Sat Oct 04 07:07:46 MSK 2025
2025-10-04 07:07:49.209  INFO 7512 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-10-04 07:07:49.211  INFO 7512 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-10-04 07:07:49.219  INFO 7512 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-10-04 07:08:05.456  INFO 12396 --- [main] .s.b.d.SpringBootSecurityDemoApplication : Starting SpringBootSecurityDemoApplication using Java 23 on Base with PID 12396 (C:\Users\Антон\IdeaProjects\Lesson\Spring_Zaur\PP_3_1_2_Boot_Security\target\classes started by Anton in C:\Users\Антон\IdeaProjects\Lesson\Spring_Zaur\PP_3_1_2_Boot_Security)
2025-10-04 07:08:05.458 DEBUG 12396 --- [main] .s.b.d.SpringBootSecurityDemoApplication : Running with Spring Boot v2.6.2, Spring v5.3.14
2025-10-04 07:08:05.458  INFO 12396 --- [main] .s.b.d.SpringBootSecurityDemoApplication : No active profile set, falling back to default profiles: default
2025-10-04 07:08:05.799  INFO 12396 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-10-04 07:08:05.829  INFO 12396 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 25 ms. Found 2 JPA repository interfaces.
2025-10-04 07:08:06.106  INFO 12396 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)
2025-10-04 07:08:06.111  INFO 12396 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-10-04 07:08:06.111  INFO 12396 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.56]
2025-10-04 07:08:06.153  INFO 12396 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-10-04 07:08:06.154  INFO 12396 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 667 ms
2025-10-04 07:08:06.245  INFO 12396 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-10-04 07:08:06.270  INFO 12396 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 5.6.3.Final
2025-10-04 07:08:06.362  INFO 12396 --- [main] o.hibernate.annotations.common.Version   : HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2025-10-04 07:08:06.415  INFO 12396 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-10-04 07:08:06.505  INFO 12396 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-10-04 07:08:06.514  INFO 12396 --- [main] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL8Dialect
2025-10-04 07:08:06.858  INFO 12396 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2025-10-04 07:08:06.863  INFO 12396 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-10-04 07:08:06.888  WARN 12396 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-10-04 07:08:07.074  INFO 12396 --- [main] r.k.s.b.demo.service.UserServiceImpl     : UserServiceImpl инициализирован
2025-10-04 07:08:07.075  INFO 12396 --- [main] r.k.s.b.demo.service.UserServiceImpl     : Начало инициализации тестовых данных...
2025-10-04 07:08:07.143 DEBUG 12396 --- [main] org.hibernate.SQL                        : 
    select
        role0_.id as id1_0_,
        role0_.name as name2_0_ 
    from
        roles role0_ 
    where
        role0_.name=?
2025-10-04 07:08:07.145 TRACE 12396 --- [main] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [VARCHAR] - [ROLE_USER]
2025-10-04 07:08:07.153 DEBUG 12396 --- [main] org.hibernate.SQL                        : 
    select
        role0_.id as id1_0_,
        role0_.name as name2_0_ 
    from
        roles role0_ 
    where
        role0_.name=?
2025-10-04 07:08:07.153 TRACE 12396 --- [main] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [VARCHAR] - [ROLE_ADMIN]
2025-10-04 07:08:07.157 DEBUG 12396 --- [main] org.hibernate.SQL                        : 
    select
        user0_.id as col_0_0_ 
    from
        users user0_ 
    where
        user0_.username=? limit ?
2025-10-04 07:08:07.157 TRACE 12396 --- [main] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [VARCHAR] - [user]
2025-10-04 07:08:07.158 DEBUG 12396 --- [main] r.k.s.b.demo.service.UserServiceImpl     : Тестовый пользователь 'user' уже существует
2025-10-04 07:08:07.158 DEBUG 12396 --- [main] org.hibernate.SQL                        : 
    select
        user0_.id as col_0_0_ 
    from
        users user0_ 
    where
        user0_.username=? limit ?
2025-10-04 07:08:07.158 TRACE 12396 --- [main] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [VARCHAR] - [admin]
2025-10-04 07:08:07.159 DEBUG 12396 --- [main] r.k.s.b.demo.service.UserServiceImpl     : Тестовый администратор 'admin' уже существует
2025-10-04 07:08:07.159 DEBUG 12396 --- [main] r.k.s.b.demo.service.UserServiceImpl     : Проверка пользователей без ролей...
2025-10-04 07:08:07.173 DEBUG 12396 --- [main] org.hibernate.SQL                        : 
    select
        user0_.id as id1_2_,
        user0_.age as age2_2_,
        user0_.email as email3_2_,
        user0_.name as name4_2_,
        user0_.password as password5_2_,
        user0_.surname as surname6_2_,
        user0_.username as username7_2_ 
    from
        users user0_
2025-10-04 07:08:07.178 DEBUG 12396 --- [main] org.hibernate.SQL                        : 
    select
        roles0_.user_id as user_id1_1_0_,
        roles0_.role_id as role_id2_1_0_,
        role1_.id as id1_0_1_,
        role1_.name as name2_0_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-10-04 07:08:07.179 TRACE 12396 --- [main] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [20]
2025-10-04 07:08:07.183 DEBUG 12396 --- [main] org.hibernate.SQL                        : 
    select
        roles0_.user_id as user_id1_1_0_,
        roles0_.role_id as role_id2_1_0_,
        role1_.id as id1_0_1_,
        role1_.name as name2_0_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-10-04 07:08:07.184 TRACE 12396 --- [main] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [18]
2025-10-04 07:08:07.184 DEBUG 12396 --- [main] org.hibernate.SQL                        : 
    select
        roles0_.user_id as user_id1_1_0_,
        roles0_.role_id as role_id2_1_0_,
        role1_.id as id1_0_1_,
        role1_.name as name2_0_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-10-04 07:08:07.184 TRACE 12396 --- [main] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [17]
2025-10-04 07:08:07.185 DEBUG 12396 --- [main] org.hibernate.SQL                        : 
    select
        roles0_.user_id as user_id1_1_0_,
        roles0_.role_id as role_id2_1_0_,
        role1_.id as id1_0_1_,
        role1_.name as name2_0_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-10-04 07:08:07.185 TRACE 12396 --- [main] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [15]
2025-10-04 07:08:07.186 DEBUG 12396 --- [main] org.hibernate.SQL                        : 
    select
        roles0_.user_id as user_id1_1_0_,
        roles0_.role_id as role_id2_1_0_,
        role1_.id as id1_0_1_,
        role1_.name as name2_0_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-10-04 07:08:07.186 TRACE 12396 --- [main] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [14]
2025-10-04 07:08:07.186 DEBUG 12396 --- [main] org.hibernate.SQL                        : 
    select
        roles0_.user_id as user_id1_1_0_,
        roles0_.role_id as role_id2_1_0_,
        role1_.id as id1_0_1_,
        role1_.name as name2_0_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-10-04 07:08:07.186 TRACE 12396 --- [main] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [13]
2025-10-04 07:08:07.188 DEBUG 12396 --- [main] org.hibernate.SQL                        : 
    select
        role0_.id as id1_0_,
        role0_.name as name2_0_ 
    from
        roles role0_ 
    where
        role0_.name=?
2025-10-04 07:08:07.188 TRACE 12396 --- [main] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [VARCHAR] - [ROLE_USER]
2025-10-04 07:08:07.189 DEBUG 12396 --- [main] r.k.s.b.demo.service.UserServiceImpl     : Пользователи без ролей не найдены
2025-10-04 07:08:07.189  INFO 12396 --- [main] r.k.s.b.demo.service.UserServiceImpl     : Инициализация тестовых данных завершена успешно
2025-10-04 07:08:07.189 DEBUG 12396 --- [main] r.k.s.b.demo.service.UserServiceImpl     : Проверка пользователей без ролей...
2025-10-04 07:08:07.189 DEBUG 12396 --- [main] org.hibernate.SQL                        : 
    select
        user0_.id as id1_2_,
        user0_.age as age2_2_,
        user0_.email as email3_2_,
        user0_.name as name4_2_,
        user0_.password as password5_2_,
        user0_.surname as surname6_2_,
        user0_.username as username7_2_ 
    from
        users user0_
2025-10-04 07:08:07.190 DEBUG 12396 --- [main] org.hibernate.SQL                        : 
    select
        roles0_.user_id as user_id1_1_0_,
        roles0_.role_id as role_id2_1_0_,
        role1_.id as id1_0_1_,
        role1_.name as name2_0_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-10-04 07:08:07.190 TRACE 12396 --- [main] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [20]
2025-10-04 07:08:07.191 DEBUG 12396 --- [main] org.hibernate.SQL                        : 
    select
        roles0_.user_id as user_id1_1_0_,
        roles0_.role_id as role_id2_1_0_,
        role1_.id as id1_0_1_,
        role1_.name as name2_0_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-10-04 07:08:07.191 TRACE 12396 --- [main] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [18]
2025-10-04 07:08:07.192 DEBUG 12396 --- [main] org.hibernate.SQL                        : 
    select
        roles0_.user_id as user_id1_1_0_,
        roles0_.role_id as role_id2_1_0_,
        role1_.id as id1_0_1_,
        role1_.name as name2_0_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-10-04 07:08:07.192 TRACE 12396 --- [main] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [17]
2025-10-04 07:08:07.192 DEBUG 12396 --- [main] org.hibernate.SQL                        : 
    select
        roles0_.user_id as user_id1_1_0_,
        roles0_.role_id as role_id2_1_0_,
        role1_.id as id1_0_1_,
        role1_.name as name2_0_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-10-04 07:08:07.192 TRACE 12396 --- [main] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [15]
2025-10-04 07:08:07.193 DEBUG 12396 --- [main] org.hibernate.SQL                        : 
    select
        roles0_.user_id as user_id1_1_0_,
        roles0_.role_id as role_id2_1_0_,
        role1_.id as id1_0_1_,
        role1_.name as name2_0_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-10-04 07:08:07.193 TRACE 12396 --- [main] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [14]
2025-10-04 07:08:07.193 DEBUG 12396 --- [main] org.hibernate.SQL                        : 
    select
        roles0_.user_id as user_id1_1_0_,
        roles0_.role_id as role_id2_1_0_,
        role1_.id as id1_0_1_,
        role1_.name as name2_0_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-10-04 07:08:07.193 TRACE 12396 --- [main] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [13]
2025-10-04 07:08:07.194 DEBUG 12396 --- [main] org.hibernate.SQL                        : 
    select
        role0_.id as id1_0_,
        role0_.name as name2_0_ 
    from
        roles role0_ 
    where
        role0_.name=?
2025-10-04 07:08:07.195 TRACE 12396 --- [main] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [VARCHAR] - [ROLE_USER]
2025-10-04 07:08:07.195 DEBUG 12396 --- [main] r.k.s.b.demo.service.UserServiceImpl     : Пользователи без ролей не найдены
2025-10-04 07:08:07.274  INFO 12396 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5c81ddab, org.springframework.security.web.context.SecurityContextPersistenceFilter@40199d5e, org.springframework.security.web.header.HeaderWriterFilter@e460ca1, org.springframework.security.web.csrf.CsrfFilter@5b74bb75, org.springframework.security.web.authentication.logout.LogoutFilter@23b087c3, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@3e1c5e0d, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@571c7572, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@210e2f2f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@24ee6faa, org.springframework.security.web.session.SessionManagementFilter@608c2042, org.springframework.security.web.access.ExceptionTranslationFilter@680937c9, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@55d8f6bb]
2025-10-04 07:08:07.341 DEBUG 12396 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-10-04 07:08:07.380 DEBUG 12396 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 9 mappings in 'requestMappingHandlerMapping'
2025-10-04 07:08:07.383  INFO 12396 --- [main] o.s.b.a.w.s.WelcomePageHandlerMapping    : Adding welcome page template: index
2025-10-04 07:08:07.390 DEBUG 12396 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/, /user, /admin, /login, /access-denied] in 'viewControllerHandlerMapping'
2025-10-04 07:08:07.398 DEBUG 12396 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-10-04 07:08:07.403 DEBUG 12396 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-10-04 07:08:07.484  INFO 12396 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8080 (http) with context path ''
2025-10-04 07:08:07.489  INFO 12396 --- [main] .s.b.d.SpringBootSecurityDemoApplication : Started SpringBootSecurityDemoApplication in 2.238 seconds (JVM running for 2.633)
2025-10-04 07:08:16.905  INFO 12396 --- [http-nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-10-04 07:08:16.905  INFO 12396 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-10-04 07:08:16.905 DEBUG 12396 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected StandardServletMultipartResolver
2025-10-04 07:08:16.905 DEBUG 12396 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected AcceptHeaderLocaleResolver
2025-10-04 07:08:16.905 DEBUG 12396 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected FixedThemeResolver
2025-10-04 07:08:16.906 DEBUG 12396 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@1e489957
2025-10-04 07:08:16.906 DEBUG 12396 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.support.SessionFlashMapManager@4687c184
2025-10-04 07:08:16.906 DEBUG 12396 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-10-04 07:08:16.906  INFO 12396 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2025-10-04 07:08:16.918 DEBUG 12396 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/", parameters={}
2025-10-04 07:08:16.922 DEBUG 12396 --- [http-nio-8080-exec-1] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped to ParameterizableViewController [view="index"]
2025-10-04 07:08:16.927 DEBUG 12396 --- [http-nio-8080-exec-1] o.s.w.s.v.ContentNegotiatingViewResolver : Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8]
2025-10-04 07:08:17.058 DEBUG 12396 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-10-04 07:08:18.658 DEBUG 12396 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/login", parameters={}
2025-10-04 07:08:18.658 DEBUG 12396 --- [http-nio-8080-exec-3] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped to ParameterizableViewController [view="login"]
2025-10-04 07:08:18.659 DEBUG 12396 --- [http-nio-8080-exec-3] o.s.w.s.v.ContentNegotiatingViewResolver : Selected '*/*' given [image/avif, image/webp, image/apng, image/svg+xml, image/*, */*;q=0.8]
2025-10-04 07:08:18.671 DEBUG 12396 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-10-04 07:08:20.586 DEBUG 12396 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/login", parameters={}
2025-10-04 07:08:20.587 DEBUG 12396 --- [http-nio-8080-exec-4] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped to ParameterizableViewController [view="login"]
2025-10-04 07:08:20.587 DEBUG 12396 --- [http-nio-8080-exec-4] o.s.w.s.v.ContentNegotiatingViewResolver : Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8]
2025-10-04 07:08:20.590 DEBUG 12396 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-10-04 07:08:20.670 DEBUG 12396 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/login", parameters={}
2025-10-04 07:08:20.670 DEBUG 12396 --- [http-nio-8080-exec-6] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped to ParameterizableViewController [view="login"]
2025-10-04 07:08:20.671 DEBUG 12396 --- [http-nio-8080-exec-6] o.s.w.s.v.ContentNegotiatingViewResolver : Selected '*/*' given [image/avif, image/webp, image/apng, image/svg+xml, image/*, */*;q=0.8]
2025-10-04 07:08:20.674 DEBUG 12396 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-10-04 07:08:28.806 DEBUG 12396 --- [http-nio-8080-exec-7] r.k.s.b.demo.service.UserServiceImpl     : Попытка загрузки пользователя по логину: admin
2025-10-04 07:08:28.808 DEBUG 12396 --- [http-nio-8080-exec-7] org.hibernate.SQL                        : 
    select
        user0_.id as id1_2_,
        user0_.age as age2_2_,
        user0_.email as email3_2_,
        user0_.name as name4_2_,
        user0_.password as password5_2_,
        user0_.surname as surname6_2_,
        user0_.username as username7_2_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-10-04 07:08:28.808 TRACE 12396 --- [http-nio-8080-exec-7] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [VARCHAR] - [admin]
2025-10-04 07:08:28.810 DEBUG 12396 --- [http-nio-8080-exec-7] org.hibernate.SQL                        : 
    select
        roles0_.user_id as user_id1_1_0_,
        roles0_.role_id as role_id2_1_0_,
        role1_.id as id1_0_1_,
        role1_.name as name2_0_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-10-04 07:08:28.810 TRACE 12396 --- [http-nio-8080-exec-7] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [15]
2025-10-04 07:08:28.811 DEBUG 12396 --- [http-nio-8080-exec-7] r.k.s.b.demo.service.UserServiceImpl     : Пользователь найден: admin (роли: [ROLE_ADMIN])
2025-10-04 07:08:28.898 DEBUG 12396 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/admin", parameters={}
2025-10-04 07:08:28.899 DEBUG 12396 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#adminPage(Model)
2025-10-04 07:08:28.905 DEBUG 12396 --- [http-nio-8080-exec-8] r.k.s.b.demo.service.UserServiceImpl     : Запрос всех пользователей
2025-10-04 07:08:28.906 DEBUG 12396 --- [http-nio-8080-exec-8] org.hibernate.SQL                        : 
    select
        user0_.id as id1_2_,
        user0_.age as age2_2_,
        user0_.email as email3_2_,
        user0_.name as name4_2_,
        user0_.password as password5_2_,
        user0_.surname as surname6_2_,
        user0_.username as username7_2_ 
    from
        users user0_
2025-10-04 07:08:28.907 DEBUG 12396 --- [http-nio-8080-exec-8] org.hibernate.SQL                        : 
    select
        roles0_.user_id as user_id1_1_0_,
        roles0_.role_id as role_id2_1_0_,
        role1_.id as id1_0_1_,
        role1_.name as name2_0_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-10-04 07:08:28.907 TRACE 12396 --- [http-nio-8080-exec-8] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [20]
2025-10-04 07:08:28.908 DEBUG 12396 --- [http-nio-8080-exec-8] org.hibernate.SQL                        : 
    select
        roles0_.user_id as user_id1_1_0_,
        roles0_.role_id as role_id2_1_0_,
        role1_.id as id1_0_1_,
        role1_.name as name2_0_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-10-04 07:08:28.908 TRACE 12396 --- [http-nio-8080-exec-8] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [18]
2025-10-04 07:08:28.908 DEBUG 12396 --- [http-nio-8080-exec-8] org.hibernate.SQL                        : 
    select
        roles0_.user_id as user_id1_1_0_,
        roles0_.role_id as role_id2_1_0_,
        role1_.id as id1_0_1_,
        role1_.name as name2_0_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-10-04 07:08:28.908 TRACE 12396 --- [http-nio-8080-exec-8] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [17]
2025-10-04 07:08:28.909 DEBUG 12396 --- [http-nio-8080-exec-8] org.hibernate.SQL                        : 
    select
        roles0_.user_id as user_id1_1_0_,
        roles0_.role_id as role_id2_1_0_,
        role1_.id as id1_0_1_,
        role1_.name as name2_0_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-10-04 07:08:28.909 TRACE 12396 --- [http-nio-8080-exec-8] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [15]
2025-10-04 07:08:28.909 DEBUG 12396 --- [http-nio-8080-exec-8] org.hibernate.SQL                        : 
    select
        roles0_.user_id as user_id1_1_0_,
        roles0_.role_id as role_id2_1_0_,
        role1_.id as id1_0_1_,
        role1_.name as name2_0_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-10-04 07:08:28.910 TRACE 12396 --- [http-nio-8080-exec-8] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [14]
2025-10-04 07:08:28.910 DEBUG 12396 --- [http-nio-8080-exec-8] org.hibernate.SQL                        : 
    select
        roles0_.user_id as user_id1_1_0_,
        roles0_.role_id as role_id2_1_0_,
        role1_.id as id1_0_1_,
        role1_.name as name2_0_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-10-04 07:08:28.910 TRACE 12396 --- [http-nio-8080-exec-8] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [13]
2025-10-04 07:08:28.910 DEBUG 12396 --- [http-nio-8080-exec-8] r.k.s.b.demo.service.UserServiceImpl     : Найдено пользователей: 6
2025-10-04 07:08:28.913 DEBUG 12396 --- [http-nio-8080-exec-8] o.s.w.s.v.ContentNegotiatingViewResolver : Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8]
2025-10-04 07:08:28.924 DEBUG 12396 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-10-04 07:08:28.952 DEBUG 12396 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/favicon.ico", parameters={}
2025-10-04 07:08:28.954 DEBUG 12396 --- [http-nio-8080-exec-9] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-10-04 07:08:28.956 DEBUG 12396 --- [http-nio-8080-exec-9] o.s.w.s.r.ResourceHttpRequestHandler     : Resource not found
2025-10-04 07:08:28.956 DEBUG 12396 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 404 NOT_FOUND
2025-10-04 07:08:28.963 DEBUG 12396 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : "ERROR" dispatch for GET "/error", parameters={}
2025-10-04 07:08:28.964 DEBUG 12396 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2025-10-04 07:08:28.971 DEBUG 12396 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json;q=0.8', given [image/avif, image/webp, image/apng, image/svg+xml, image/*, */*;q=0.8] and supported [application/json, application/*+json, application/json, application/*+json]
2025-10-04 07:08:28.971 DEBUG 12396 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{timestamp=Sat Oct 04 07:08:28 MSK 2025, status=404, error=Not Found, message=No message available,  (truncated)...]
2025-10-04 07:08:28.994 DEBUG 12396 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Exiting from "ERROR" dispatch, status 404
2025-10-04 07:12:19.414  INFO 12396 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-10-04 07:12:19.416  INFO 12396 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-10-04 07:12:19.422  INFO 12396 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-10-04 07:12:44.420  INFO 3064 --- [main] .s.b.d.SpringBootSecurityDemoApplication : Starting SpringBootSecurityDemoApplication using Java 23 on Base with PID 3064 (C:\Users\Антон\IdeaProjects\Lesson\Spring_Zaur\PP_3_1_2_Boot_Security\target\classes started by Anton in C:\Users\Антон\IdeaProjects\Lesson\Spring_Zaur\PP_3_1_2_Boot_Security)
2025-10-04 07:12:44.422 DEBUG 3064 --- [main] .s.b.d.SpringBootSecurityDemoApplication : Running with Spring Boot v2.6.2, Spring v5.3.14
2025-10-04 07:12:44.422  INFO 3064 --- [main] .s.b.d.SpringBootSecurityDemoApplication : No active profile set, falling back to default profiles: default
2025-10-04 07:12:44.757  INFO 3064 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-10-04 07:12:44.786  INFO 3064 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 25 ms. Found 2 JPA repository interfaces.
2025-10-04 07:12:45.054  INFO 3064 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)
2025-10-04 07:12:45.059  INFO 3064 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-10-04 07:12:45.059  INFO 3064 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.56]
2025-10-04 07:12:45.101  INFO 3064 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-10-04 07:12:45.102  INFO 3064 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 650 ms
2025-10-04 07:12:45.191  INFO 3064 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-10-04 07:12:45.216  INFO 3064 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 5.6.3.Final
2025-10-04 07:12:45.305  INFO 3064 --- [main] o.hibernate.annotations.common.Version   : HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2025-10-04 07:12:45.359  INFO 3064 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-10-04 07:12:45.448  INFO 3064 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-10-04 07:12:45.456  INFO 3064 --- [main] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL8Dialect
2025-10-04 07:12:45.803  INFO 3064 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2025-10-04 07:12:45.808  INFO 3064 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-10-04 07:12:45.836  WARN 3064 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-10-04 07:12:46.027  INFO 3064 --- [main] r.k.s.b.demo.service.UserServiceImpl     : UserServiceImpl инициализирован
2025-10-04 07:12:46.027  INFO 3064 --- [main] r.k.s.b.demo.service.UserServiceImpl     : Начало инициализации тестовых данных...
2025-10-04 07:12:46.096 DEBUG 3064 --- [main] org.hibernate.SQL                        : 
    select
        role0_.id as id1_0_,
        role0_.name as name2_0_ 
    from
        roles role0_ 
    where
        role0_.name=?
2025-10-04 07:12:46.097 TRACE 3064 --- [main] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [VARCHAR] - [ROLE_USER]
2025-10-04 07:12:46.106 DEBUG 3064 --- [main] org.hibernate.SQL                        : 
    select
        role0_.id as id1_0_,
        role0_.name as name2_0_ 
    from
        roles role0_ 
    where
        role0_.name=?
2025-10-04 07:12:46.106 TRACE 3064 --- [main] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [VARCHAR] - [ROLE_ADMIN]
2025-10-04 07:12:46.110 DEBUG 3064 --- [main] org.hibernate.SQL                        : 
    select
        user0_.id as col_0_0_ 
    from
        users user0_ 
    where
        user0_.username=? limit ?
2025-10-04 07:12:46.110 TRACE 3064 --- [main] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [VARCHAR] - [user]
2025-10-04 07:12:46.111 DEBUG 3064 --- [main] r.k.s.b.demo.service.UserServiceImpl     : Тестовый пользователь 'user' уже существует
2025-10-04 07:12:46.111 DEBUG 3064 --- [main] org.hibernate.SQL                        : 
    select
        user0_.id as col_0_0_ 
    from
        users user0_ 
    where
        user0_.username=? limit ?
2025-10-04 07:12:46.112 TRACE 3064 --- [main] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [VARCHAR] - [admin]
2025-10-04 07:12:46.112 DEBUG 3064 --- [main] r.k.s.b.demo.service.UserServiceImpl     : Тестовый администратор 'admin' уже существует
2025-10-04 07:12:46.112 DEBUG 3064 --- [main] r.k.s.b.demo.service.UserServiceImpl     : Проверка пользователей без ролей...
2025-10-04 07:12:46.126 DEBUG 3064 --- [main] org.hibernate.SQL                        : 
    select
        user0_.id as id1_2_,
        user0_.age as age2_2_,
        user0_.email as email3_2_,
        user0_.name as name4_2_,
        user0_.password as password5_2_,
        user0_.surname as surname6_2_,
        user0_.username as username7_2_ 
    from
        users user0_
2025-10-04 07:12:46.132 DEBUG 3064 --- [main] org.hibernate.SQL                        : 
    select
        roles0_.user_id as user_id1_1_0_,
        roles0_.role_id as role_id2_1_0_,
        role1_.id as id1_0_1_,
        role1_.name as name2_0_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-10-04 07:12:46.132 TRACE 3064 --- [main] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [20]
2025-10-04 07:12:46.137 DEBUG 3064 --- [main] org.hibernate.SQL                        : 
    select
        roles0_.user_id as user_id1_1_0_,
        roles0_.role_id as role_id2_1_0_,
        role1_.id as id1_0_1_,
        role1_.name as name2_0_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-10-04 07:12:46.137 TRACE 3064 --- [main] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [18]
2025-10-04 07:12:46.138 DEBUG 3064 --- [main] org.hibernate.SQL                        : 
    select
        roles0_.user_id as user_id1_1_0_,
        roles0_.role_id as role_id2_1_0_,
        role1_.id as id1_0_1_,
        role1_.name as name2_0_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-10-04 07:12:46.138 TRACE 3064 --- [main] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [17]
2025-10-04 07:12:46.138 DEBUG 3064 --- [main] org.hibernate.SQL                        : 
    select
        roles0_.user_id as user_id1_1_0_,
        roles0_.role_id as role_id2_1_0_,
        role1_.id as id1_0_1_,
        role1_.name as name2_0_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-10-04 07:12:46.139 TRACE 3064 --- [main] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [15]
2025-10-04 07:12:46.139 DEBUG 3064 --- [main] org.hibernate.SQL                        : 
    select
        roles0_.user_id as user_id1_1_0_,
        roles0_.role_id as role_id2_1_0_,
        role1_.id as id1_0_1_,
        role1_.name as name2_0_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-10-04 07:12:46.139 TRACE 3064 --- [main] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [14]
2025-10-04 07:12:46.140 DEBUG 3064 --- [main] org.hibernate.SQL                        : 
    select
        roles0_.user_id as user_id1_1_0_,
        roles0_.role_id as role_id2_1_0_,
        role1_.id as id1_0_1_,
        role1_.name as name2_0_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-10-04 07:12:46.140 TRACE 3064 --- [main] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [13]
2025-10-04 07:12:46.142 DEBUG 3064 --- [main] org.hibernate.SQL                        : 
    select
        role0_.id as id1_0_,
        role0_.name as name2_0_ 
    from
        roles role0_ 
    where
        role0_.name=?
2025-10-04 07:12:46.142 TRACE 3064 --- [main] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [VARCHAR] - [ROLE_USER]
2025-10-04 07:12:46.142 DEBUG 3064 --- [main] r.k.s.b.demo.service.UserServiceImpl     : Пользователи без ролей не найдены
2025-10-04 07:12:46.142  INFO 3064 --- [main] r.k.s.b.demo.service.UserServiceImpl     : Инициализация тестовых данных завершена успешно
2025-10-04 07:12:46.143 DEBUG 3064 --- [main] r.k.s.b.demo.service.UserServiceImpl     : Проверка пользователей без ролей...
2025-10-04 07:12:46.143 DEBUG 3064 --- [main] org.hibernate.SQL                        : 
    select
        user0_.id as id1_2_,
        user0_.age as age2_2_,
        user0_.email as email3_2_,
        user0_.name as name4_2_,
        user0_.password as password5_2_,
        user0_.surname as surname6_2_,
        user0_.username as username7_2_ 
    from
        users user0_
2025-10-04 07:12:46.144 DEBUG 3064 --- [main] org.hibernate.SQL                        : 
    select
        roles0_.user_id as user_id1_1_0_,
        roles0_.role_id as role_id2_1_0_,
        role1_.id as id1_0_1_,
        role1_.name as name2_0_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-10-04 07:12:46.144 TRACE 3064 --- [main] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [20]
2025-10-04 07:12:46.145 DEBUG 3064 --- [main] org.hibernate.SQL                        : 
    select
        roles0_.user_id as user_id1_1_0_,
        roles0_.role_id as role_id2_1_0_,
        role1_.id as id1_0_1_,
        role1_.name as name2_0_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-10-04 07:12:46.145 TRACE 3064 --- [main] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [18]
2025-10-04 07:12:46.145 DEBUG 3064 --- [main] org.hibernate.SQL                        : 
    select
        roles0_.user_id as user_id1_1_0_,
        roles0_.role_id as role_id2_1_0_,
        role1_.id as id1_0_1_,
        role1_.name as name2_0_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-10-04 07:12:46.146 TRACE 3064 --- [main] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [17]
2025-10-04 07:12:46.146 DEBUG 3064 --- [main] org.hibernate.SQL                        : 
    select
        roles0_.user_id as user_id1_1_0_,
        roles0_.role_id as role_id2_1_0_,
        role1_.id as id1_0_1_,
        role1_.name as name2_0_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-10-04 07:12:46.146 TRACE 3064 --- [main] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [15]
2025-10-04 07:12:46.147 DEBUG 3064 --- [main] org.hibernate.SQL                        : 
    select
        roles0_.user_id as user_id1_1_0_,
        roles0_.role_id as role_id2_1_0_,
        role1_.id as id1_0_1_,
        role1_.name as name2_0_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-10-04 07:12:46.147 TRACE 3064 --- [main] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [14]
2025-10-04 07:12:46.147 DEBUG 3064 --- [main] org.hibernate.SQL                        : 
    select
        roles0_.user_id as user_id1_1_0_,
        roles0_.role_id as role_id2_1_0_,
        role1_.id as id1_0_1_,
        role1_.name as name2_0_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-10-04 07:12:46.147 TRACE 3064 --- [main] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [13]
2025-10-04 07:12:46.148 DEBUG 3064 --- [main] org.hibernate.SQL                        : 
    select
        role0_.id as id1_0_,
        role0_.name as name2_0_ 
    from
        roles role0_ 
    where
        role0_.name=?
2025-10-04 07:12:46.149 TRACE 3064 --- [main] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [VARCHAR] - [ROLE_USER]
2025-10-04 07:12:46.149 DEBUG 3064 --- [main] r.k.s.b.demo.service.UserServiceImpl     : Пользователи без ролей не найдены
2025-10-04 07:12:46.230  INFO 3064 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@7aa1fb0e, org.springframework.security.web.context.SecurityContextPersistenceFilter@229d508c, org.springframework.security.web.header.HeaderWriterFilter@d17d554, org.springframework.security.web.csrf.CsrfFilter@7aef8000, org.springframework.security.web.authentication.logout.LogoutFilter@2acbe46d, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@626b9092, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@7167d81b, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@2f3c7b24, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@5e663ab, org.springframework.security.web.session.SessionManagementFilter@2b409174, org.springframework.security.web.access.ExceptionTranslationFilter@346e5cc, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@acea29e]
2025-10-04 07:12:46.293 DEBUG 3064 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-10-04 07:12:46.331 DEBUG 3064 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 9 mappings in 'requestMappingHandlerMapping'
2025-10-04 07:12:46.334  INFO 3064 --- [main] o.s.b.a.w.s.WelcomePageHandlerMapping    : Adding welcome page template: index
2025-10-04 07:12:46.342 DEBUG 3064 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/, /user, /admin, /login, /access-denied] in 'viewControllerHandlerMapping'
2025-10-04 07:12:46.351 DEBUG 3064 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-10-04 07:12:46.356 DEBUG 3064 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-10-04 07:12:46.437  INFO 3064 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8080 (http) with context path ''
2025-10-04 07:12:46.442  INFO 3064 --- [main] .s.b.d.SpringBootSecurityDemoApplication : Started SpringBootSecurityDemoApplication in 2.221 seconds (JVM running for 2.61)
2025-10-04 07:12:50.335  INFO 3064 --- [http-nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-10-04 07:12:50.335  INFO 3064 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-10-04 07:12:50.335 DEBUG 3064 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected StandardServletMultipartResolver
2025-10-04 07:12:50.335 DEBUG 3064 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected AcceptHeaderLocaleResolver
2025-10-04 07:12:50.335 DEBUG 3064 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected FixedThemeResolver
2025-10-04 07:12:50.336 DEBUG 3064 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@167bae0b
2025-10-04 07:12:50.336 DEBUG 3064 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.support.SessionFlashMapManager@2dec57c5
2025-10-04 07:12:50.336 DEBUG 3064 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-10-04 07:12:50.336  INFO 3064 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2025-10-04 07:12:50.370 DEBUG 3064 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/login", parameters={}
2025-10-04 07:12:50.372 DEBUG 3064 --- [http-nio-8080-exec-2] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped to ParameterizableViewController [view="login"]
2025-10-04 07:12:50.376 DEBUG 3064 --- [http-nio-8080-exec-2] o.s.w.s.v.ContentNegotiatingViewResolver : Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8]
2025-10-04 07:12:50.506 DEBUG 3064 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-10-04 07:12:59.039 DEBUG 3064 --- [http-nio-8080-exec-3] r.k.s.b.demo.service.UserServiceImpl     : Попытка загрузки пользователя по логину: admin
2025-10-04 07:12:59.041 DEBUG 3064 --- [http-nio-8080-exec-3] org.hibernate.SQL                        : 
    select
        user0_.id as id1_2_,
        user0_.age as age2_2_,
        user0_.email as email3_2_,
        user0_.name as name4_2_,
        user0_.password as password5_2_,
        user0_.surname as surname6_2_,
        user0_.username as username7_2_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-10-04 07:12:59.042 TRACE 3064 --- [http-nio-8080-exec-3] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [VARCHAR] - [admin]
2025-10-04 07:12:59.042 DEBUG 3064 --- [http-nio-8080-exec-3] org.hibernate.SQL                        : 
    select
        roles0_.user_id as user_id1_1_0_,
        roles0_.role_id as role_id2_1_0_,
        role1_.id as id1_0_1_,
        role1_.name as name2_0_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-10-04 07:12:59.042 TRACE 3064 --- [http-nio-8080-exec-3] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [15]
2025-10-04 07:12:59.043 DEBUG 3064 --- [http-nio-8080-exec-3] r.k.s.b.demo.service.UserServiceImpl     : Пользователь найден: admin (роли: [ROLE_ADMIN])
2025-10-04 07:12:59.132 DEBUG 3064 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/login?error", parameters={masked}
2025-10-04 07:12:59.132 DEBUG 3064 --- [http-nio-8080-exec-4] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped to ParameterizableViewController [view="login"]
2025-10-04 07:12:59.133 DEBUG 3064 --- [http-nio-8080-exec-4] o.s.w.s.v.ContentNegotiatingViewResolver : Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8]
2025-10-04 07:12:59.135 DEBUG 3064 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-10-04 07:13:07.933 DEBUG 3064 --- [http-nio-8080-exec-5] r.k.s.b.demo.service.UserServiceImpl     : Попытка загрузки пользователя по логину: admin
2025-10-04 07:13:07.933 DEBUG 3064 --- [http-nio-8080-exec-5] org.hibernate.SQL                        : 
    select
        user0_.id as id1_2_,
        user0_.age as age2_2_,
        user0_.email as email3_2_,
        user0_.name as name4_2_,
        user0_.password as password5_2_,
        user0_.surname as surname6_2_,
        user0_.username as username7_2_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-10-04 07:13:07.934 TRACE 3064 --- [http-nio-8080-exec-5] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [VARCHAR] - [admin]
2025-10-04 07:13:07.934 DEBUG 3064 --- [http-nio-8080-exec-5] org.hibernate.SQL                        : 
    select
        roles0_.user_id as user_id1_1_0_,
        roles0_.role_id as role_id2_1_0_,
        role1_.id as id1_0_1_,
        role1_.name as name2_0_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-10-04 07:13:07.935 TRACE 3064 --- [http-nio-8080-exec-5] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [15]
2025-10-04 07:13:07.935 DEBUG 3064 --- [http-nio-8080-exec-5] r.k.s.b.demo.service.UserServiceImpl     : Пользователь найден: admin (роли: [ROLE_ADMIN])
2025-10-04 07:13:08.015 DEBUG 3064 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/admin", parameters={}
2025-10-04 07:13:08.016 DEBUG 3064 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#adminPage(Model)
2025-10-04 07:13:08.022 DEBUG 3064 --- [http-nio-8080-exec-6] r.k.s.b.demo.service.UserServiceImpl     : Запрос всех пользователей
2025-10-04 07:13:08.023 DEBUG 3064 --- [http-nio-8080-exec-6] org.hibernate.SQL                        : 
    select
        user0_.id as id1_2_,
        user0_.age as age2_2_,
        user0_.email as email3_2_,
        user0_.name as name4_2_,
        user0_.password as password5_2_,
        user0_.surname as surname6_2_,
        user0_.username as username7_2_ 
    from
        users user0_
2025-10-04 07:13:08.024 DEBUG 3064 --- [http-nio-8080-exec-6] org.hibernate.SQL                        : 
    select
        roles0_.user_id as user_id1_1_0_,
        roles0_.role_id as role_id2_1_0_,
        role1_.id as id1_0_1_,
        role1_.name as name2_0_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-10-04 07:13:08.024 TRACE 3064 --- [http-nio-8080-exec-6] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [20]
2025-10-04 07:13:08.025 DEBUG 3064 --- [http-nio-8080-exec-6] org.hibernate.SQL                        : 
    select
        roles0_.user_id as user_id1_1_0_,
        roles0_.role_id as role_id2_1_0_,
        role1_.id as id1_0_1_,
        role1_.name as name2_0_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-10-04 07:13:08.025 TRACE 3064 --- [http-nio-8080-exec-6] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [18]
2025-10-04 07:13:08.025 DEBUG 3064 --- [http-nio-8080-exec-6] org.hibernate.SQL                        : 
    select
        roles0_.user_id as user_id1_1_0_,
        roles0_.role_id as role_id2_1_0_,
        role1_.id as id1_0_1_,
        role1_.name as name2_0_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-10-04 07:13:08.025 TRACE 3064 --- [http-nio-8080-exec-6] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [17]
2025-10-04 07:13:08.026 DEBUG 3064 --- [http-nio-8080-exec-6] org.hibernate.SQL                        : 
    select
        roles0_.user_id as user_id1_1_0_,
        roles0_.role_id as role_id2_1_0_,
        role1_.id as id1_0_1_,
        role1_.name as name2_0_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-10-04 07:13:08.026 TRACE 3064 --- [http-nio-8080-exec-6] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [15]
2025-10-04 07:13:08.026 DEBUG 3064 --- [http-nio-8080-exec-6] org.hibernate.SQL                        : 
    select
        roles0_.user_id as user_id1_1_0_,
        roles0_.role_id as role_id2_1_0_,
        role1_.id as id1_0_1_,
        role1_.name as name2_0_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-10-04 07:13:08.026 TRACE 3064 --- [http-nio-8080-exec-6] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [14]
2025-10-04 07:13:08.027 DEBUG 3064 --- [http-nio-8080-exec-6] org.hibernate.SQL                        : 
    select
        roles0_.user_id as user_id1_1_0_,
        roles0_.role_id as role_id2_1_0_,
        role1_.id as id1_0_1_,
        role1_.name as name2_0_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-10-04 07:13:08.027 TRACE 3064 --- [http-nio-8080-exec-6] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [13]
2025-10-04 07:13:08.027 DEBUG 3064 --- [http-nio-8080-exec-6] r.k.s.b.demo.service.UserServiceImpl     : Найдено пользователей: 6
2025-10-04 07:13:08.031 DEBUG 3064 --- [http-nio-8080-exec-6] o.s.w.s.v.ContentNegotiatingViewResolver : Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8]
2025-10-04 07:13:08.055 DEBUG 3064 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-10-04 07:13:16.048 DEBUG 3064 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/admin/addUser", parameters={}
2025-10-04 07:13:16.048 DEBUG 3064 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#showAddUserForm(Model)
2025-10-04 07:13:16.053 DEBUG 3064 --- [http-nio-8080-exec-7] o.s.w.s.v.ContentNegotiatingViewResolver : Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8]
2025-10-04 07:13:16.056 DEBUG 3064 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-10-04 07:13:52.712 DEBUG 3064 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : POST "/admin/addUser", parameters={masked}
2025-10-04 07:13:52.712 DEBUG 3064 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#addUser(User, List)
2025-10-04 07:13:52.723  INFO 3064 --- [http-nio-8080-exec-9] r.k.s.b.demo.service.UserServiceImpl     : Попытка сохранения нового пользователя с логином: admin1
2025-10-04 07:13:52.723 DEBUG 3064 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : 
    select
        user0_.id as id1_2_,
        user0_.age as age2_2_,
        user0_.email as email3_2_,
        user0_.name as name4_2_,
        user0_.password as password5_2_,
        user0_.surname as surname6_2_,
        user0_.username as username7_2_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-10-04 07:13:52.723 TRACE 3064 --- [http-nio-8080-exec-9] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [VARCHAR] - [admin1]
2025-10-04 07:13:52.793 DEBUG 3064 --- [http-nio-8080-exec-9] r.k.s.b.demo.service.UserServiceImpl     : Пользователю назначены роли: [ROLE_USER, ROLE_ADMIN]
2025-10-04 07:13:52.799 DEBUG 3064 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : 
    insert 
    into
        users
        (age, email, name, password, surname, username) 
    values
        (?, ?, ?, ?, ?, ?)
2025-10-04 07:13:52.799 TRACE 3064 --- [http-nio-8080-exec-9] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [INTEGER] - [22]
2025-10-04 07:13:52.799 TRACE 3064 --- [http-nio-8080-exec-9] o.h.type.descriptor.sql.BasicBinder      : binding parameter [2] as [VARCHAR] - []
2025-10-04 07:13:52.800 TRACE 3064 --- [http-nio-8080-exec-9] o.h.type.descriptor.sql.BasicBinder      : binding parameter [3] as [VARCHAR] - [Антон]
2025-10-04 07:13:52.800 TRACE 3064 --- [http-nio-8080-exec-9] o.h.type.descriptor.sql.BasicBinder      : binding parameter [4] as [VARCHAR] - [$2a$10$Tq8FOfqAarPeW4Asvpqo0uvEaCRIS.lIrLDMFoEKxBeARBKgB/jhK]
2025-10-04 07:13:52.800 TRACE 3064 --- [http-nio-8080-exec-9] o.h.type.descriptor.sql.BasicBinder      : binding parameter [5] as [VARCHAR] - [Иванов]
2025-10-04 07:13:52.800 TRACE 3064 --- [http-nio-8080-exec-9] o.h.type.descriptor.sql.BasicBinder      : binding parameter [6] as [VARCHAR] - [admin1]
2025-10-04 07:13:52.803  INFO 3064 --- [http-nio-8080-exec-9] r.k.s.b.demo.service.UserServiceImpl     : Пользователь успешно создан: admin1 (ID: 21) с ролями: [ROLE_USER, ROLE_ADMIN]
2025-10-04 07:13:52.806 DEBUG 3064 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2025-10-04 07:13:52.806 TRACE 3064 --- [http-nio-8080-exec-9] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [21]
2025-10-04 07:13:52.808  INFO 3064 --- [http-nio-8080-exec-9] o.h.e.j.b.internal.AbstractBatchImpl     : HHH000010: On release of batch it still contained JDBC statements
2025-10-04 07:13:52.810 DEBUG 3064 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Failed to complete request: org.springframework.dao.InvalidDataAccessApiUsageException: org.hibernate.TransientObjectException: object references an unsaved transient instance - save the transient instance before flushing: ru.kata.spring.boot_security.demo.model.Role; nested exception is java.lang.IllegalStateException: org.hibernate.TransientObjectException: object references an unsaved transient instance - save the transient instance before flushing: ru.kata.spring.boot_security.demo.model.Role
2025-10-04 07:13:52.812 ERROR 3064 --- [http-nio-8080-exec-9] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.springframework.dao.InvalidDataAccessApiUsageException: org.hibernate.TransientObjectException: object references an unsaved transient instance - save the transient instance before flushing: ru.kata.spring.boot_security.demo.model.Role; nested exception is java.lang.IllegalStateException: org.hibernate.TransientObjectException: object references an unsaved transient instance - save the transient instance before flushing: ru.kata.spring.boot_security.demo.model.Role] with root cause

org.hibernate.TransientObjectException: object references an unsaved transient instance - save the transient instance before flushing: ru.kata.spring.boot_security.demo.model.Role
	at org.hibernate.engine.internal.ForeignKeys.getEntityIdentifierIfNotUnsaved(ForeignKeys.java:347) ~[hibernate-core-5.6.3.Final.jar:5.6.3.Final]
	at org.hibernate.type.EntityType.getIdentifier(EntityType.java:507) ~[hibernate-core-5.6.3.Final.jar:5.6.3.Final]
	at org.hibernate.type.EntityType.nullSafeSet(EntityType.java:280) ~[hibernate-core-5.6.3.Final.jar:5.6.3.Final]
	at org.hibernate.persister.collection.AbstractCollectionPersister.writeElement(AbstractCollectionPersister.java:925) ~[hibernate-core-5.6.3.Final.jar:5.6.3.Final]
	at org.hibernate.persister.collection.AbstractCollectionPersister.recreate(AbstractCollectionPersister.java:1347) ~[hibernate-core-5.6.3.Final.jar:5.6.3.Final]
	at org.hibernate.action.internal.CollectionRecreateAction.execute(CollectionRecreateAction.java:50) ~[hibernate-core-5.6.3.Final.jar:5.6.3.Final]
	at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:604) ~[hibernate-core-5.6.3.Final.jar:5.6.3.Final]
	at org.hibernate.engine.spi.ActionQueue.lambda$executeActions$1(ActionQueue.java:478) ~[hibernate-core-5.6.3.Final.jar:5.6.3.Final]
	at java.base/java.util.LinkedHashMap.forEach(LinkedHashMap.java:987) ~[na:na]
	at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:475) ~[hibernate-core-5.6.3.Final.jar:5.6.3.Final]
	at org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:344) ~[hibernate-core-5.6.3.Final.jar:5.6.3.Final]
	at org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:40) ~[hibernate-core-5.6.3.Final.jar:5.6.3.Final]
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107) ~[hibernate-core-5.6.3.Final.jar:5.6.3.Final]
	at org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1402) ~[hibernate-core-5.6.3.Final.jar:5.6.3.Final]
	at org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:493) ~[hibernate-core-5.6.3.Final.jar:5.6.3.Final]
	at org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:3285) ~[hibernate-core-5.6.3.Final.jar:5.6.3.Final]
	at org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:2420) ~[hibernate-core-5.6.3.Final.jar:5.6.3.Final]
	at org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:449) ~[hibernate-core-5.6.3.Final.jar:5.6.3.Final]
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:183) ~[hibernate-core-5.6.3.Final.jar:5.6.3.Final]
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.access$300(JdbcResourceLocalTransactionCoordinatorImpl.java:40) ~[hibernate-core-5.6.3.Final.jar:5.6.3.Final]
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:281) ~[hibernate-core-5.6.3.Final.jar:5.6.3.Final]
	at org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101) ~[hibernate-core-5.6.3.Final.jar:5.6.3.Final]
	at org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:562) ~[spring-orm-5.3.14.jar:5.3.14]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:743) ~[spring-tx-5.3.14.jar:5.3.14]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:711) ~[spring-tx-5.3.14.jar:5.3.14]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:654) ~[spring-tx-5.3.14.jar:5.3.14]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:407) ~[spring-tx-5.3.14.jar:5.3.14]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-5.3.14.jar:5.3.14]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.3.14.jar:5.3.14]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:753) ~[spring-aop-5.3.14.jar:5.3.14]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:698) ~[spring-aop-5.3.14.jar:5.3.14]
	at ru.kata.spring.boot_security.demo.service.UserServiceImpl$$EnhancerBySpringCGLIB$$f2bd4890.save(<generated>) ~[classes/:na]
	at ru.kata.spring.boot_security.demo.controller.AdminController.addUser(AdminController.java:55) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-5.3.14.jar:5.3.14]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-5.3.14.jar:5.3.14]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117) ~[spring-webmvc-5.3.14.jar:5.3.14]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.3.14.jar:5.3.14]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808) ~[spring-webmvc-5.3.14.jar:5.3.14]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.3.14.jar:5.3.14]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1067) ~[spring-webmvc-5.3.14.jar:5.3.14]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963) ~[spring-webmvc-5.3.14.jar:5.3.14]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.3.14.jar:5.3.14]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909) ~[spring-webmvc-5.3.14.jar:5.3.14]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:681) ~[tomcat-embed-core-9.0.56.jar:4.0.FR]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.3.14.jar:5.3.14]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:764) ~[tomcat-embed-core-9.0.56.jar:4.0.FR]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:122) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:116) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:109) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:219) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:213) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.csrf.CsrfFilter.doFilterInternal(CsrfFilter.java:132) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.14.jar:5.3.14]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.14.jar:5.3.14]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.14.jar:5.3.14]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354) ~[spring-web-5.3.14.jar:5.3.14]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267) ~[spring-web-5.3.14.jar:5.3.14]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.14.jar:5.3.14]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.14.jar:5.3.14]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.3.14.jar:5.3.14]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.14.jar:5.3.14]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.3.14.jar:5.3.14]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.14.jar:5.3.14]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:540) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:382) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:895) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1732) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at java.base/java.lang.Thread.run(Thread.java:1575) ~[na:na]

2025-10-04 07:13:52.819 DEBUG 3064 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : "ERROR" dispatch for POST "/error", parameters={masked}
2025-10-04 07:13:52.820 DEBUG 3064 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#errorHtml(HttpServletRequest, HttpServletResponse)
2025-10-04 07:13:52.826 DEBUG 3064 --- [http-nio-8080-exec-9] o.s.w.s.v.ContentNegotiatingViewResolver : Selected 'text/html' given [text/html, text/html;q=0.8]
2025-10-04 07:13:52.827 DEBUG 3064 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Exiting from "ERROR" dispatch, status 500
2025-10-04 07:14:00.753 DEBUG 3064 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/admin/addUser", parameters={}
2025-10-04 07:14:00.753 DEBUG 3064 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#showAddUserForm(Model)
2025-10-04 07:14:00.754 DEBUG 3064 --- [http-nio-8080-exec-10] o.s.w.s.v.ContentNegotiatingViewResolver : Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8]
2025-10-04 07:14:00.757 DEBUG 3064 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-10-04 07:14:13.225 DEBUG 3064 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : POST "/admin/addUser", parameters={masked}
2025-10-04 07:14:13.225 DEBUG 3064 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#addUser(User, List)
2025-10-04 07:14:13.226  INFO 3064 --- [http-nio-8080-exec-1] r.k.s.b.demo.service.UserServiceImpl     : Попытка сохранения нового пользователя с логином: admin1
2025-10-04 07:14:13.227 DEBUG 3064 --- [http-nio-8080-exec-1] org.hibernate.SQL                        : 
    select
        user0_.id as id1_2_,
        user0_.age as age2_2_,
        user0_.email as email3_2_,
        user0_.name as name4_2_,
        user0_.password as password5_2_,
        user0_.surname as surname6_2_,
        user0_.username as username7_2_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-10-04 07:14:13.227 TRACE 3064 --- [http-nio-8080-exec-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [VARCHAR] - [admin1]
2025-10-04 07:14:13.297 DEBUG 3064 --- [http-nio-8080-exec-1] r.k.s.b.demo.service.UserServiceImpl     : Пользователю назначены роли: [ROLE_ADMIN]
2025-10-04 07:14:13.298 DEBUG 3064 --- [http-nio-8080-exec-1] org.hibernate.SQL                        : 
    insert 
    into
        users
        (age, email, name, password, surname, username) 
    values
        (?, ?, ?, ?, ?, ?)
2025-10-04 07:14:13.298 TRACE 3064 --- [http-nio-8080-exec-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [INTEGER] - [22]
2025-10-04 07:14:13.298 TRACE 3064 --- [http-nio-8080-exec-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [2] as [VARCHAR] - []
2025-10-04 07:14:13.298 TRACE 3064 --- [http-nio-8080-exec-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [3] as [VARCHAR] - [Антон]
2025-10-04 07:14:13.298 TRACE 3064 --- [http-nio-8080-exec-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [4] as [VARCHAR] - [$2a$10$v5I0/Okev6VvS.b8X.t9y.VpPcY8pGXh7Mi5hw0urKHD/yBDqovjq]
2025-10-04 07:14:13.298 TRACE 3064 --- [http-nio-8080-exec-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [5] as [VARCHAR] - [Иванов]
2025-10-04 07:14:13.298 TRACE 3064 --- [http-nio-8080-exec-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [6] as [VARCHAR] - [admin1]
2025-10-04 07:14:13.299  INFO 3064 --- [http-nio-8080-exec-1] r.k.s.b.demo.service.UserServiceImpl     : Пользователь успешно создан: admin1 (ID: 22) с ролями: [ROLE_ADMIN]
2025-10-04 07:14:13.299 DEBUG 3064 --- [http-nio-8080-exec-1] org.hibernate.SQL                        : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2025-10-04 07:14:13.300 TRACE 3064 --- [http-nio-8080-exec-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [22]
2025-10-04 07:14:13.301  INFO 3064 --- [http-nio-8080-exec-1] o.h.e.j.b.internal.AbstractBatchImpl     : HHH000010: On release of batch it still contained JDBC statements
2025-10-04 07:14:13.302 DEBUG 3064 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Failed to complete request: org.springframework.dao.InvalidDataAccessApiUsageException: org.hibernate.TransientObjectException: object references an unsaved transient instance - save the transient instance before flushing: ru.kata.spring.boot_security.demo.model.Role; nested exception is java.lang.IllegalStateException: org.hibernate.TransientObjectException: object references an unsaved transient instance - save the transient instance before flushing: ru.kata.spring.boot_security.demo.model.Role
2025-10-04 07:14:13.302 ERROR 3064 --- [http-nio-8080-exec-1] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.springframework.dao.InvalidDataAccessApiUsageException: org.hibernate.TransientObjectException: object references an unsaved transient instance - save the transient instance before flushing: ru.kata.spring.boot_security.demo.model.Role; nested exception is java.lang.IllegalStateException: org.hibernate.TransientObjectException: object references an unsaved transient instance - save the transient instance before flushing: ru.kata.spring.boot_security.demo.model.Role] with root cause

org.hibernate.TransientObjectException: object references an unsaved transient instance - save the transient instance before flushing: ru.kata.spring.boot_security.demo.model.Role
	at org.hibernate.engine.internal.ForeignKeys.getEntityIdentifierIfNotUnsaved(ForeignKeys.java:347) ~[hibernate-core-5.6.3.Final.jar:5.6.3.Final]
	at org.hibernate.type.EntityType.getIdentifier(EntityType.java:507) ~[hibernate-core-5.6.3.Final.jar:5.6.3.Final]
	at org.hibernate.type.EntityType.nullSafeSet(EntityType.java:280) ~[hibernate-core-5.6.3.Final.jar:5.6.3.Final]
	at org.hibernate.persister.collection.AbstractCollectionPersister.writeElement(AbstractCollectionPersister.java:925) ~[hibernate-core-5.6.3.Final.jar:5.6.3.Final]
	at org.hibernate.persister.collection.AbstractCollectionPersister.recreate(AbstractCollectionPersister.java:1347) ~[hibernate-core-5.6.3.Final.jar:5.6.3.Final]
	at org.hibernate.action.internal.CollectionRecreateAction.execute(CollectionRecreateAction.java:50) ~[hibernate-core-5.6.3.Final.jar:5.6.3.Final]
	at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:604) ~[hibernate-core-5.6.3.Final.jar:5.6.3.Final]
	at org.hibernate.engine.spi.ActionQueue.lambda$executeActions$1(ActionQueue.java:478) ~[hibernate-core-5.6.3.Final.jar:5.6.3.Final]
	at java.base/java.util.LinkedHashMap.forEach(LinkedHashMap.java:987) ~[na:na]
	at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:475) ~[hibernate-core-5.6.3.Final.jar:5.6.3.Final]
	at org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:344) ~[hibernate-core-5.6.3.Final.jar:5.6.3.Final]
	at org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:40) ~[hibernate-core-5.6.3.Final.jar:5.6.3.Final]
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107) ~[hibernate-core-5.6.3.Final.jar:5.6.3.Final]
	at org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1402) ~[hibernate-core-5.6.3.Final.jar:5.6.3.Final]
	at org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:493) ~[hibernate-core-5.6.3.Final.jar:5.6.3.Final]
	at org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:3285) ~[hibernate-core-5.6.3.Final.jar:5.6.3.Final]
	at org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:2420) ~[hibernate-core-5.6.3.Final.jar:5.6.3.Final]
	at org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:449) ~[hibernate-core-5.6.3.Final.jar:5.6.3.Final]
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:183) ~[hibernate-core-5.6.3.Final.jar:5.6.3.Final]
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.access$300(JdbcResourceLocalTransactionCoordinatorImpl.java:40) ~[hibernate-core-5.6.3.Final.jar:5.6.3.Final]
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:281) ~[hibernate-core-5.6.3.Final.jar:5.6.3.Final]
	at org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101) ~[hibernate-core-5.6.3.Final.jar:5.6.3.Final]
	at org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:562) ~[spring-orm-5.3.14.jar:5.3.14]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:743) ~[spring-tx-5.3.14.jar:5.3.14]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:711) ~[spring-tx-5.3.14.jar:5.3.14]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:654) ~[spring-tx-5.3.14.jar:5.3.14]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:407) ~[spring-tx-5.3.14.jar:5.3.14]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-5.3.14.jar:5.3.14]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.3.14.jar:5.3.14]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:753) ~[spring-aop-5.3.14.jar:5.3.14]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:698) ~[spring-aop-5.3.14.jar:5.3.14]
	at ru.kata.spring.boot_security.demo.service.UserServiceImpl$$EnhancerBySpringCGLIB$$f2bd4890.save(<generated>) ~[classes/:na]
	at ru.kata.spring.boot_security.demo.controller.AdminController.addUser(AdminController.java:55) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-5.3.14.jar:5.3.14]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-5.3.14.jar:5.3.14]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117) ~[spring-webmvc-5.3.14.jar:5.3.14]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.3.14.jar:5.3.14]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808) ~[spring-webmvc-5.3.14.jar:5.3.14]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.3.14.jar:5.3.14]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1067) ~[spring-webmvc-5.3.14.jar:5.3.14]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963) ~[spring-webmvc-5.3.14.jar:5.3.14]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.3.14.jar:5.3.14]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909) ~[spring-webmvc-5.3.14.jar:5.3.14]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:681) ~[tomcat-embed-core-9.0.56.jar:4.0.FR]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.3.14.jar:5.3.14]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:764) ~[tomcat-embed-core-9.0.56.jar:4.0.FR]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:122) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:116) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:109) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:219) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:213) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.csrf.CsrfFilter.doFilterInternal(CsrfFilter.java:132) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.14.jar:5.3.14]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.14.jar:5.3.14]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.14.jar:5.3.14]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354) ~[spring-web-5.3.14.jar:5.3.14]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267) ~[spring-web-5.3.14.jar:5.3.14]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.14.jar:5.3.14]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.14.jar:5.3.14]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.3.14.jar:5.3.14]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.14.jar:5.3.14]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.3.14.jar:5.3.14]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.14.jar:5.3.14]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:540) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:382) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:895) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1732) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at java.base/java.lang.Thread.run(Thread.java:1575) ~[na:na]

2025-10-04 07:14:13.303 DEBUG 3064 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : "ERROR" dispatch for POST "/error", parameters={masked}
2025-10-04 07:14:13.304 DEBUG 3064 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#errorHtml(HttpServletRequest, HttpServletResponse)
2025-10-04 07:14:13.304 DEBUG 3064 --- [http-nio-8080-exec-1] o.s.w.s.v.ContentNegotiatingViewResolver : Selected 'text/html' given [text/html, text/html;q=0.8]
2025-10-04 07:14:13.305 DEBUG 3064 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Exiting from "ERROR" dispatch, status 500
2025-10-04 07:15:25.889  INFO 3064 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-10-04 07:15:25.890  INFO 3064 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-10-04 07:15:25.895  INFO 3064 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-10-04 07:24:32.557  INFO 15692 --- [main] d.SpringBootSecurityDemoApplicationTests : Starting SpringBootSecurityDemoApplicationTests using Java 23 on Base with PID 15692 (started by Anton in C:\Users\Антон\IdeaProjects\Lesson\Spring_Zaur\PP_3_1_2_Boot_Security)
2025-10-04 07:24:32.558 DEBUG 15692 --- [main] d.SpringBootSecurityDemoApplicationTests : Running with Spring Boot v2.6.2, Spring v5.3.14
2025-10-04 07:24:32.558  INFO 15692 --- [main] d.SpringBootSecurityDemoApplicationTests : No active profile set, falling back to default profiles: default
2025-10-04 07:24:32.581 DEBUG 15692 --- [main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@7997b197
2025-10-04 07:24:32.987  INFO 15692 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-10-04 07:24:33.027  INFO 15692 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 34 ms. Found 2 JPA repository interfaces.
2025-10-04 07:24:33.388  INFO 15692 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-10-04 07:24:33.420  INFO 15692 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 5.6.3.Final
2025-10-04 07:24:33.518  INFO 15692 --- [main] o.hibernate.annotations.common.Version   : HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2025-10-04 07:24:33.589  INFO 15692 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-10-04 07:24:33.714  INFO 15692 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-10-04 07:24:33.723  INFO 15692 --- [main] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL8Dialect
2025-10-04 07:24:34.097  INFO 15692 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2025-10-04 07:24:34.102  INFO 15692 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-10-04 07:24:34.138  WARN 15692 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-10-04 07:24:34.421  INFO 15692 --- [main] r.k.s.b.demo.service.UserServiceImpl     : UserServiceImpl инициализирован
2025-10-04 07:24:34.423 DEBUG 15692 --- [main] r.k.s.b.demo.service.UserServiceImpl     : Проверка пользователей без ролей...
2025-10-04 07:24:34.506 DEBUG 15692 --- [main] org.hibernate.SQL                        : 
    select
        user0_.id as id1_2_,
        user0_.age as age2_2_,
        user0_.email as email3_2_,
        user0_.name as name4_2_,
        user0_.password as password5_2_,
        user0_.surname as surname6_2_,
        user0_.username as username7_2_ 
    from
        users user0_
2025-10-04 07:24:34.519 DEBUG 15692 --- [main] org.hibernate.SQL                        : 
    select
        roles0_.user_id as user_id1_1_0_,
        roles0_.role_id as role_id2_1_0_,
        role1_.id as id1_0_1_,
        role1_.name as name2_0_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-10-04 07:24:34.520 TRACE 15692 --- [main] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [20]
2025-10-04 07:24:34.526 DEBUG 15692 --- [main] org.hibernate.SQL                        : 
    select
        roles0_.user_id as user_id1_1_0_,
        roles0_.role_id as role_id2_1_0_,
        role1_.id as id1_0_1_,
        role1_.name as name2_0_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-10-04 07:24:34.526 TRACE 15692 --- [main] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [18]
2025-10-04 07:24:34.527 DEBUG 15692 --- [main] org.hibernate.SQL                        : 
    select
        roles0_.user_id as user_id1_1_0_,
        roles0_.role_id as role_id2_1_0_,
        role1_.id as id1_0_1_,
        role1_.name as name2_0_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-10-04 07:24:34.527 TRACE 15692 --- [main] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [17]
2025-10-04 07:24:34.528 DEBUG 15692 --- [main] org.hibernate.SQL                        : 
    select
        roles0_.user_id as user_id1_1_0_,
        roles0_.role_id as role_id2_1_0_,
        role1_.id as id1_0_1_,
        role1_.name as name2_0_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-10-04 07:24:34.528 TRACE 15692 --- [main] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [15]
2025-10-04 07:24:34.529 DEBUG 15692 --- [main] org.hibernate.SQL                        : 
    select
        roles0_.user_id as user_id1_1_0_,
        roles0_.role_id as role_id2_1_0_,
        role1_.id as id1_0_1_,
        role1_.name as name2_0_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-10-04 07:24:34.529 TRACE 15692 --- [main] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [14]
2025-10-04 07:24:34.530 DEBUG 15692 --- [main] org.hibernate.SQL                        : 
    select
        roles0_.user_id as user_id1_1_0_,
        roles0_.role_id as role_id2_1_0_,
        role1_.id as id1_0_1_,
        role1_.name as name2_0_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-10-04 07:24:34.530 TRACE 15692 --- [main] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [13]
2025-10-04 07:24:34.554 DEBUG 15692 --- [main] org.hibernate.SQL                        : 
    select
        role0_.id as id1_0_,
        role0_.name as name2_0_ 
    from
        roles role0_ 
    where
        role0_.name=?
2025-10-04 07:24:34.555 TRACE 15692 --- [main] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [VARCHAR] - [ROLE_USER]
2025-10-04 07:24:34.557 DEBUG 15692 --- [main] r.k.s.b.demo.service.UserServiceImpl     : Пользователи без ролей не найдены
2025-10-04 07:24:34.557  INFO 15692 --- [main] r.k.s.b.demo.service.UserServiceImpl     : Начало инициализации тестовых данных...
2025-10-04 07:24:34.558 DEBUG 15692 --- [main] org.hibernate.SQL                        : 
    select
        role0_.id as id1_0_,
        role0_.name as name2_0_ 
    from
        roles role0_ 
    where
        role0_.name=?
2025-10-04 07:24:34.558 TRACE 15692 --- [main] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [VARCHAR] - [ROLE_USER]
2025-10-04 07:24:34.559 DEBUG 15692 --- [main] org.hibernate.SQL                        : 
    select
        role0_.id as id1_0_,
        role0_.name as name2_0_ 
    from
        roles role0_ 
    where
        role0_.name=?
2025-10-04 07:24:34.559 TRACE 15692 --- [main] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [VARCHAR] - [ROLE_ADMIN]
2025-10-04 07:24:34.563 DEBUG 15692 --- [main] org.hibernate.SQL                        : 
    select
        user0_.id as col_0_0_ 
    from
        users user0_ 
    where
        user0_.username=? limit ?
2025-10-04 07:24:34.564 TRACE 15692 --- [main] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [VARCHAR] - [user]
2025-10-04 07:24:34.565 DEBUG 15692 --- [main] r.k.s.b.demo.service.UserServiceImpl     : Тестовый пользователь 'user' уже существует
2025-10-04 07:24:34.565 DEBUG 15692 --- [main] org.hibernate.SQL                        : 
    select
        user0_.id as col_0_0_ 
    from
        users user0_ 
    where
        user0_.username=? limit ?
2025-10-04 07:24:34.566 TRACE 15692 --- [main] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [VARCHAR] - [admin]
2025-10-04 07:24:34.566 DEBUG 15692 --- [main] r.k.s.b.demo.service.UserServiceImpl     : Тестовый администратор 'admin' уже существует
2025-10-04 07:24:34.566 DEBUG 15692 --- [main] r.k.s.b.demo.service.UserServiceImpl     : Проверка пользователей без ролей...
2025-10-04 07:24:34.567 DEBUG 15692 --- [main] org.hibernate.SQL                        : 
    select
        user0_.id as id1_2_,
        user0_.age as age2_2_,
        user0_.email as email3_2_,
        user0_.name as name4_2_,
        user0_.password as password5_2_,
        user0_.surname as surname6_2_,
        user0_.username as username7_2_ 
    from
        users user0_
2025-10-04 07:24:34.568 DEBUG 15692 --- [main] org.hibernate.SQL                        : 
    select
        roles0_.user_id as user_id1_1_0_,
        roles0_.role_id as role_id2_1_0_,
        role1_.id as id1_0_1_,
        role1_.name as name2_0_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-10-04 07:24:34.568 TRACE 15692 --- [main] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [20]
2025-10-04 07:24:34.569 DEBUG 15692 --- [main] org.hibernate.SQL                        : 
    select
        roles0_.user_id as user_id1_1_0_,
        roles0_.role_id as role_id2_1_0_,
        role1_.id as id1_0_1_,
        role1_.name as name2_0_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-10-04 07:24:34.569 TRACE 15692 --- [main] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [18]
2025-10-04 07:24:34.570 DEBUG 15692 --- [main] org.hibernate.SQL                        : 
    select
        roles0_.user_id as user_id1_1_0_,
        roles0_.role_id as role_id2_1_0_,
        role1_.id as id1_0_1_,
        role1_.name as name2_0_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-10-04 07:24:34.570 TRACE 15692 --- [main] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [17]
2025-10-04 07:24:34.571 DEBUG 15692 --- [main] org.hibernate.SQL                        : 
    select
        roles0_.user_id as user_id1_1_0_,
        roles0_.role_id as role_id2_1_0_,
        role1_.id as id1_0_1_,
        role1_.name as name2_0_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-10-04 07:24:34.571 TRACE 15692 --- [main] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [15]
2025-10-04 07:24:34.572 DEBUG 15692 --- [main] org.hibernate.SQL                        : 
    select
        roles0_.user_id as user_id1_1_0_,
        roles0_.role_id as role_id2_1_0_,
        role1_.id as id1_0_1_,
        role1_.name as name2_0_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-10-04 07:24:34.572 TRACE 15692 --- [main] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [14]
2025-10-04 07:24:34.573 DEBUG 15692 --- [main] org.hibernate.SQL                        : 
    select
        roles0_.user_id as user_id1_1_0_,
        roles0_.role_id as role_id2_1_0_,
        role1_.id as id1_0_1_,
        role1_.name as name2_0_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-10-04 07:24:34.573 TRACE 15692 --- [main] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [13]
2025-10-04 07:24:34.575 DEBUG 15692 --- [main] org.hibernate.SQL                        : 
    select
        role0_.id as id1_0_,
        role0_.name as name2_0_ 
    from
        roles role0_ 
    where
        role0_.name=?
2025-10-04 07:24:34.575 TRACE 15692 --- [main] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [VARCHAR] - [ROLE_USER]
2025-10-04 07:24:34.575 DEBUG 15692 --- [main] r.k.s.b.demo.service.UserServiceImpl     : Пользователи без ролей не найдены
2025-10-04 07:24:34.575  INFO 15692 --- [main] r.k.s.b.demo.service.UserServiceImpl     : Инициализация тестовых данных завершена успешно
2025-10-04 07:24:34.705  INFO 15692 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@675bf541, org.springframework.security.web.context.SecurityContextPersistenceFilter@7b24d5e4, org.springframework.security.web.header.HeaderWriterFilter@36f497b1, org.springframework.security.web.csrf.CsrfFilter@58041b11, org.springframework.security.web.authentication.logout.LogoutFilter@296a71df, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@6ac83e67, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@39fb5ddf, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@62732be7, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@2aac87ab, org.springframework.security.web.session.SessionManagementFilter@4797023d, org.springframework.security.web.access.ExceptionTranslationFilter@7e532f2d, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@3bbdf835]
2025-10-04 07:24:34.904 DEBUG 15692 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-10-04 07:24:34.949 DEBUG 15692 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 9 mappings in 'requestMappingHandlerMapping'
2025-10-04 07:24:34.952  INFO 15692 --- [main] o.s.b.a.w.s.WelcomePageHandlerMapping    : Adding welcome page template: index
2025-10-04 07:24:34.967 DEBUG 15692 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/, /user, /admin, /login, /access-denied] in 'viewControllerHandlerMapping'
2025-10-04 07:24:34.980 DEBUG 15692 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-10-04 07:24:34.988 DEBUG 15692 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-10-04 07:24:35.102  INFO 15692 --- [main] d.SpringBootSecurityDemoApplicationTests : Started SpringBootSecurityDemoApplicationTests in 2.71 seconds (JVM running for 3.265)
2025-10-04 07:24:35.173 DEBUG 15692 --- [SpringApplicationShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@7997b197, started on Sat Oct 04 07:24:32 MSK 2025
2025-10-04 07:24:35.176  INFO 15692 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-10-04 07:24:35.178  INFO 15692 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-10-04 07:24:35.188  INFO 15692 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-10-04 07:24:42.242  INFO 8740 --- [main] .s.b.d.SpringBootSecurityDemoApplication : Starting SpringBootSecurityDemoApplication using Java 23 on Base with PID 8740 (C:\Users\Антон\IdeaProjects\Lesson\Spring_Zaur\PP_3_1_2_Boot_Security\target\classes started by Anton in C:\Users\Антон\IdeaProjects\Lesson\Spring_Zaur\PP_3_1_2_Boot_Security)
2025-10-04 07:24:42.244 DEBUG 8740 --- [main] .s.b.d.SpringBootSecurityDemoApplication : Running with Spring Boot v2.6.2, Spring v5.3.14
2025-10-04 07:24:42.244  INFO 8740 --- [main] .s.b.d.SpringBootSecurityDemoApplication : No active profile set, falling back to default profiles: default
2025-10-04 07:24:42.585  INFO 8740 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-10-04 07:24:42.614  INFO 8740 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 24 ms. Found 2 JPA repository interfaces.
2025-10-04 07:24:42.885  INFO 8740 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)
2025-10-04 07:24:42.893  INFO 8740 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-10-04 07:24:42.893  INFO 8740 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.56]
2025-10-04 07:24:42.936  INFO 8740 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-10-04 07:24:42.936  INFO 8740 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 661 ms
2025-10-04 07:24:43.029  INFO 8740 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-10-04 07:24:43.055  INFO 8740 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 5.6.3.Final
2025-10-04 07:24:43.144  INFO 8740 --- [main] o.hibernate.annotations.common.Version   : HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2025-10-04 07:24:43.197  INFO 8740 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-10-04 07:24:43.287  INFO 8740 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-10-04 07:24:43.296  INFO 8740 --- [main] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL8Dialect
2025-10-04 07:24:43.641  INFO 8740 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2025-10-04 07:24:43.645  INFO 8740 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-10-04 07:24:43.670  WARN 8740 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-10-04 07:24:43.855  INFO 8740 --- [main] r.k.s.b.demo.service.UserServiceImpl     : UserServiceImpl инициализирован
2025-10-04 07:24:43.855 DEBUG 8740 --- [main] r.k.s.b.demo.service.UserServiceImpl     : Проверка пользователей без ролей...
2025-10-04 07:24:43.929 DEBUG 8740 --- [main] org.hibernate.SQL                        : 
    select
        user0_.id as id1_2_,
        user0_.age as age2_2_,
        user0_.email as email3_2_,
        user0_.name as name4_2_,
        user0_.password as password5_2_,
        user0_.surname as surname6_2_,
        user0_.username as username7_2_ 
    from
        users user0_
2025-10-04 07:24:43.941 DEBUG 8740 --- [main] org.hibernate.SQL                        : 
    select
        roles0_.user_id as user_id1_1_0_,
        roles0_.role_id as role_id2_1_0_,
        role1_.id as id1_0_1_,
        role1_.name as name2_0_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-10-04 07:24:43.943 TRACE 8740 --- [main] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [20]
2025-10-04 07:24:43.948 DEBUG 8740 --- [main] org.hibernate.SQL                        : 
    select
        roles0_.user_id as user_id1_1_0_,
        roles0_.role_id as role_id2_1_0_,
        role1_.id as id1_0_1_,
        role1_.name as name2_0_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-10-04 07:24:43.948 TRACE 8740 --- [main] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [18]
2025-10-04 07:24:43.949 DEBUG 8740 --- [main] org.hibernate.SQL                        : 
    select
        roles0_.user_id as user_id1_1_0_,
        roles0_.role_id as role_id2_1_0_,
        role1_.id as id1_0_1_,
        role1_.name as name2_0_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-10-04 07:24:43.950 TRACE 8740 --- [main] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [17]
2025-10-04 07:24:43.950 DEBUG 8740 --- [main] org.hibernate.SQL                        : 
    select
        roles0_.user_id as user_id1_1_0_,
        roles0_.role_id as role_id2_1_0_,
        role1_.id as id1_0_1_,
        role1_.name as name2_0_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-10-04 07:24:43.950 TRACE 8740 --- [main] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [15]
2025-10-04 07:24:43.951 DEBUG 8740 --- [main] org.hibernate.SQL                        : 
    select
        roles0_.user_id as user_id1_1_0_,
        roles0_.role_id as role_id2_1_0_,
        role1_.id as id1_0_1_,
        role1_.name as name2_0_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-10-04 07:24:43.951 TRACE 8740 --- [main] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [14]
2025-10-04 07:24:43.952 DEBUG 8740 --- [main] org.hibernate.SQL                        : 
    select
        roles0_.user_id as user_id1_1_0_,
        roles0_.role_id as role_id2_1_0_,
        role1_.id as id1_0_1_,
        role1_.name as name2_0_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-10-04 07:24:43.952 TRACE 8740 --- [main] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [13]
2025-10-04 07:24:43.974 DEBUG 8740 --- [main] org.hibernate.SQL                        : 
    select
        role0_.id as id1_0_,
        role0_.name as name2_0_ 
    from
        roles role0_ 
    where
        role0_.name=?
2025-10-04 07:24:43.974 TRACE 8740 --- [main] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [VARCHAR] - [ROLE_USER]
2025-10-04 07:24:43.976 DEBUG 8740 --- [main] r.k.s.b.demo.service.UserServiceImpl     : Пользователи без ролей не найдены
2025-10-04 07:24:43.976  INFO 8740 --- [main] r.k.s.b.demo.service.UserServiceImpl     : Начало инициализации тестовых данных...
2025-10-04 07:24:43.976 DEBUG 8740 --- [main] org.hibernate.SQL                        : 
    select
        role0_.id as id1_0_,
        role0_.name as name2_0_ 
    from
        roles role0_ 
    where
        role0_.name=?
2025-10-04 07:24:43.977 TRACE 8740 --- [main] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [VARCHAR] - [ROLE_USER]
2025-10-04 07:24:43.977 DEBUG 8740 --- [main] org.hibernate.SQL                        : 
    select
        role0_.id as id1_0_,
        role0_.name as name2_0_ 
    from
        roles role0_ 
    where
        role0_.name=?
2025-10-04 07:24:43.978 TRACE 8740 --- [main] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [VARCHAR] - [ROLE_ADMIN]
2025-10-04 07:24:43.980 DEBUG 8740 --- [main] org.hibernate.SQL                        : 
    select
        user0_.id as col_0_0_ 
    from
        users user0_ 
    where
        user0_.username=? limit ?
2025-10-04 07:24:43.981 TRACE 8740 --- [main] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [VARCHAR] - [user]
2025-10-04 07:24:43.982 DEBUG 8740 --- [main] r.k.s.b.demo.service.UserServiceImpl     : Тестовый пользователь 'user' уже существует
2025-10-04 07:24:43.982 DEBUG 8740 --- [main] org.hibernate.SQL                        : 
    select
        user0_.id as col_0_0_ 
    from
        users user0_ 
    where
        user0_.username=? limit ?
2025-10-04 07:24:43.982 TRACE 8740 --- [main] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [VARCHAR] - [admin]
2025-10-04 07:24:43.983 DEBUG 8740 --- [main] r.k.s.b.demo.service.UserServiceImpl     : Тестовый администратор 'admin' уже существует
2025-10-04 07:24:43.983 DEBUG 8740 --- [main] r.k.s.b.demo.service.UserServiceImpl     : Проверка пользователей без ролей...
2025-10-04 07:24:43.983 DEBUG 8740 --- [main] org.hibernate.SQL                        : 
    select
        user0_.id as id1_2_,
        user0_.age as age2_2_,
        user0_.email as email3_2_,
        user0_.name as name4_2_,
        user0_.password as password5_2_,
        user0_.surname as surname6_2_,
        user0_.username as username7_2_ 
    from
        users user0_
2025-10-04 07:24:43.984 DEBUG 8740 --- [main] org.hibernate.SQL                        : 
    select
        roles0_.user_id as user_id1_1_0_,
        roles0_.role_id as role_id2_1_0_,
        role1_.id as id1_0_1_,
        role1_.name as name2_0_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-10-04 07:24:43.985 TRACE 8740 --- [main] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [20]
2025-10-04 07:24:43.985 DEBUG 8740 --- [main] org.hibernate.SQL                        : 
    select
        roles0_.user_id as user_id1_1_0_,
        roles0_.role_id as role_id2_1_0_,
        role1_.id as id1_0_1_,
        role1_.name as name2_0_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-10-04 07:24:43.985 TRACE 8740 --- [main] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [18]
2025-10-04 07:24:43.986 DEBUG 8740 --- [main] org.hibernate.SQL                        : 
    select
        roles0_.user_id as user_id1_1_0_,
        roles0_.role_id as role_id2_1_0_,
        role1_.id as id1_0_1_,
        role1_.name as name2_0_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-10-04 07:24:43.986 TRACE 8740 --- [main] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [17]
2025-10-04 07:24:43.986 DEBUG 8740 --- [main] org.hibernate.SQL                        : 
    select
        roles0_.user_id as user_id1_1_0_,
        roles0_.role_id as role_id2_1_0_,
        role1_.id as id1_0_1_,
        role1_.name as name2_0_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-10-04 07:24:43.987 TRACE 8740 --- [main] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [15]
2025-10-04 07:24:43.987 DEBUG 8740 --- [main] org.hibernate.SQL                        : 
    select
        roles0_.user_id as user_id1_1_0_,
        roles0_.role_id as role_id2_1_0_,
        role1_.id as id1_0_1_,
        role1_.name as name2_0_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-10-04 07:24:43.987 TRACE 8740 --- [main] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [14]
2025-10-04 07:24:43.988 DEBUG 8740 --- [main] org.hibernate.SQL                        : 
    select
        roles0_.user_id as user_id1_1_0_,
        roles0_.role_id as role_id2_1_0_,
        role1_.id as id1_0_1_,
        role1_.name as name2_0_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-10-04 07:24:43.988 TRACE 8740 --- [main] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [13]
2025-10-04 07:24:43.989 DEBUG 8740 --- [main] org.hibernate.SQL                        : 
    select
        role0_.id as id1_0_,
        role0_.name as name2_0_ 
    from
        roles role0_ 
    where
        role0_.name=?
2025-10-04 07:24:43.989 TRACE 8740 --- [main] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [VARCHAR] - [ROLE_USER]
2025-10-04 07:24:43.989 DEBUG 8740 --- [main] r.k.s.b.demo.service.UserServiceImpl     : Пользователи без ролей не найдены
2025-10-04 07:24:43.989  INFO 8740 --- [main] r.k.s.b.demo.service.UserServiceImpl     : Инициализация тестовых данных завершена успешно
2025-10-04 07:24:44.069  INFO 8740 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@2d3768ce, org.springframework.security.web.context.SecurityContextPersistenceFilter@5773f83d, org.springframework.security.web.header.HeaderWriterFilter@59d29065, org.springframework.security.web.csrf.CsrfFilter@680937c9, org.springframework.security.web.authentication.logout.LogoutFilter@42a7e7e1, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@3f838072, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@7d2baa56, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@3911fec8, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@2a9ea03f, org.springframework.security.web.session.SessionManagementFilter@6dbdeb69, org.springframework.security.web.access.ExceptionTranslationFilter@7267006e, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@6ad0cd43]
2025-10-04 07:24:44.129 DEBUG 8740 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-10-04 07:24:44.167 DEBUG 8740 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 9 mappings in 'requestMappingHandlerMapping'
2025-10-04 07:24:44.171  INFO 8740 --- [main] o.s.b.a.w.s.WelcomePageHandlerMapping    : Adding welcome page template: index
2025-10-04 07:24:44.177 DEBUG 8740 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/, /user, /admin, /login, /access-denied] in 'viewControllerHandlerMapping'
2025-10-04 07:24:44.185 DEBUG 8740 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-10-04 07:24:44.189 DEBUG 8740 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-10-04 07:24:44.268  INFO 8740 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8080 (http) with context path ''
2025-10-04 07:24:44.273  INFO 8740 --- [main] .s.b.d.SpringBootSecurityDemoApplication : Started SpringBootSecurityDemoApplication in 2.231 seconds (JVM running for 2.615)
2025-10-04 07:24:49.999  INFO 8740 --- [http-nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-10-04 07:24:49.999  INFO 8740 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-10-04 07:24:49.999 DEBUG 8740 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected StandardServletMultipartResolver
2025-10-04 07:24:49.999 DEBUG 8740 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected AcceptHeaderLocaleResolver
2025-10-04 07:24:49.999 DEBUG 8740 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected FixedThemeResolver
2025-10-04 07:24:49.999 DEBUG 8740 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@477906cf
2025-10-04 07:24:50.000 DEBUG 8740 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.support.SessionFlashMapManager@3083e6ef
2025-10-04 07:24:50.000 DEBUG 8740 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-10-04 07:24:50.000  INFO 8740 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2025-10-04 07:24:50.016 DEBUG 8740 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : "FORWARD" dispatch for POST "/access-denied", parameters={masked}
2025-10-04 07:24:50.019 DEBUG 8740 --- [http-nio-8080-exec-1] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped to ParameterizableViewController [view="access-denied"]
2025-10-04 07:24:50.021  WARN 8740 --- [http-nio-8080-exec-1] .w.s.m.s.DefaultHandlerExceptionResolver : Resolved [org.springframework.web.HttpRequestMethodNotSupportedException: Request method 'POST' not supported]
2025-10-04 07:24:50.021 DEBUG 8740 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Exiting from "FORWARD" dispatch, status 405
2025-10-04 07:24:50.041 DEBUG 8740 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/login", parameters={}
2025-10-04 07:24:50.042 DEBUG 8740 --- [http-nio-8080-exec-2] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped to ParameterizableViewController [view="login"]
2025-10-04 07:24:50.046 DEBUG 8740 --- [http-nio-8080-exec-2] o.s.w.s.v.ContentNegotiatingViewResolver : Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8]
2025-10-04 07:24:50.172 DEBUG 8740 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-10-04 07:24:56.878 DEBUG 8740 --- [http-nio-8080-exec-3] r.k.s.b.demo.service.UserServiceImpl     : Попытка загрузки пользователя по логину: admin
2025-10-04 07:24:56.880 DEBUG 8740 --- [http-nio-8080-exec-3] org.hibernate.SQL                        : 
    select
        user0_.id as id1_2_,
        user0_.age as age2_2_,
        user0_.email as email3_2_,
        user0_.name as name4_2_,
        user0_.password as password5_2_,
        user0_.surname as surname6_2_,
        user0_.username as username7_2_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-10-04 07:24:56.880 TRACE 8740 --- [http-nio-8080-exec-3] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [VARCHAR] - [admin]
2025-10-04 07:24:56.881 DEBUG 8740 --- [http-nio-8080-exec-3] org.hibernate.SQL                        : 
    select
        roles0_.user_id as user_id1_1_0_,
        roles0_.role_id as role_id2_1_0_,
        role1_.id as id1_0_1_,
        role1_.name as name2_0_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-10-04 07:24:56.881 TRACE 8740 --- [http-nio-8080-exec-3] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [15]
2025-10-04 07:24:56.882 DEBUG 8740 --- [http-nio-8080-exec-3] r.k.s.b.demo.service.UserServiceImpl     : Пользователь найден: admin (роли: [ROLE_ADMIN])
2025-10-04 07:24:56.968 DEBUG 8740 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/admin", parameters={}
2025-10-04 07:24:56.969 DEBUG 8740 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#adminPage(Model)
2025-10-04 07:24:56.975 DEBUG 8740 --- [http-nio-8080-exec-4] r.k.s.b.demo.service.UserServiceImpl     : Запрос всех пользователей
2025-10-04 07:24:56.975 DEBUG 8740 --- [http-nio-8080-exec-4] org.hibernate.SQL                        : 
    select
        user0_.id as id1_2_,
        user0_.age as age2_2_,
        user0_.email as email3_2_,
        user0_.name as name4_2_,
        user0_.password as password5_2_,
        user0_.surname as surname6_2_,
        user0_.username as username7_2_ 
    from
        users user0_
2025-10-04 07:24:56.976 DEBUG 8740 --- [http-nio-8080-exec-4] org.hibernate.SQL                        : 
    select
        roles0_.user_id as user_id1_1_0_,
        roles0_.role_id as role_id2_1_0_,
        role1_.id as id1_0_1_,
        role1_.name as name2_0_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-10-04 07:24:56.977 TRACE 8740 --- [http-nio-8080-exec-4] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [20]
2025-10-04 07:24:56.977 DEBUG 8740 --- [http-nio-8080-exec-4] org.hibernate.SQL                        : 
    select
        roles0_.user_id as user_id1_1_0_,
        roles0_.role_id as role_id2_1_0_,
        role1_.id as id1_0_1_,
        role1_.name as name2_0_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-10-04 07:24:56.977 TRACE 8740 --- [http-nio-8080-exec-4] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [18]
2025-10-04 07:24:56.978 DEBUG 8740 --- [http-nio-8080-exec-4] org.hibernate.SQL                        : 
    select
        roles0_.user_id as user_id1_1_0_,
        roles0_.role_id as role_id2_1_0_,
        role1_.id as id1_0_1_,
        role1_.name as name2_0_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-10-04 07:24:56.979 TRACE 8740 --- [http-nio-8080-exec-4] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [17]
2025-10-04 07:24:56.979 DEBUG 8740 --- [http-nio-8080-exec-4] org.hibernate.SQL                        : 
    select
        roles0_.user_id as user_id1_1_0_,
        roles0_.role_id as role_id2_1_0_,
        role1_.id as id1_0_1_,
        role1_.name as name2_0_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-10-04 07:24:56.980 TRACE 8740 --- [http-nio-8080-exec-4] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [15]
2025-10-04 07:24:56.980 DEBUG 8740 --- [http-nio-8080-exec-4] org.hibernate.SQL                        : 
    select
        roles0_.user_id as user_id1_1_0_,
        roles0_.role_id as role_id2_1_0_,
        role1_.id as id1_0_1_,
        role1_.name as name2_0_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-10-04 07:24:56.980 TRACE 8740 --- [http-nio-8080-exec-4] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [14]
2025-10-04 07:24:56.981 DEBUG 8740 --- [http-nio-8080-exec-4] org.hibernate.SQL                        : 
    select
        roles0_.user_id as user_id1_1_0_,
        roles0_.role_id as role_id2_1_0_,
        role1_.id as id1_0_1_,
        role1_.name as name2_0_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-10-04 07:24:56.981 TRACE 8740 --- [http-nio-8080-exec-4] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [13]
2025-10-04 07:24:56.981 DEBUG 8740 --- [http-nio-8080-exec-4] r.k.s.b.demo.service.UserServiceImpl     : Найдено пользователей: 6
2025-10-04 07:24:56.985 DEBUG 8740 --- [http-nio-8080-exec-4] o.s.w.s.v.ContentNegotiatingViewResolver : Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8]
2025-10-04 07:24:57.008 DEBUG 8740 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-10-04 07:25:01.389 DEBUG 8740 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/admin/addUser", parameters={}
2025-10-04 07:25:01.389 DEBUG 8740 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#showAddUserForm(Model)
2025-10-04 07:25:01.393 DEBUG 8740 --- [http-nio-8080-exec-5] o.s.w.s.v.ContentNegotiatingViewResolver : Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8]
2025-10-04 07:25:01.397 DEBUG 8740 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-10-04 07:25:21.540 DEBUG 8740 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : POST "/admin/addUser", parameters={masked}
2025-10-04 07:25:21.540 DEBUG 8740 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#addUser(User, List)
2025-10-04 07:25:21.549  INFO 8740 --- [http-nio-8080-exec-6] r.k.s.b.demo.service.UserServiceImpl     : Попытка сохранения нового пользователя с логином: admin1
2025-10-04 07:25:21.549 DEBUG 8740 --- [http-nio-8080-exec-6] org.hibernate.SQL                        : 
    select
        user0_.id as id1_2_,
        user0_.age as age2_2_,
        user0_.email as email3_2_,
        user0_.name as name4_2_,
        user0_.password as password5_2_,
        user0_.surname as surname6_2_,
        user0_.username as username7_2_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-10-04 07:25:21.550 TRACE 8740 --- [http-nio-8080-exec-6] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [VARCHAR] - [admin1]
2025-10-04 07:25:21.621 DEBUG 8740 --- [http-nio-8080-exec-6] r.k.s.b.demo.service.UserServiceImpl     : Обработка ролей пользователя: [ROLE_USER]
2025-10-04 07:25:21.622 DEBUG 8740 --- [http-nio-8080-exec-6] org.hibernate.SQL                        : 
    select
        role0_.id as id1_0_,
        role0_.name as name2_0_ 
    from
        roles role0_ 
    where
        role0_.name=?
2025-10-04 07:25:21.622 TRACE 8740 --- [http-nio-8080-exec-6] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [VARCHAR] - [ROLE_USER]
2025-10-04 07:25:21.623 DEBUG 8740 --- [http-nio-8080-exec-6] r.k.s.b.demo.service.UserServiceImpl     : Установлены управляемые роли: [ROLE_USER]
2025-10-04 07:25:21.629 DEBUG 8740 --- [http-nio-8080-exec-6] org.hibernate.SQL                        : 
    insert 
    into
        users
        (age, email, name, password, surname, username) 
    values
        (?, ?, ?, ?, ?, ?)
2025-10-04 07:25:21.629 TRACE 8740 --- [http-nio-8080-exec-6] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [INTEGER] - [22]
2025-10-04 07:25:21.629 TRACE 8740 --- [http-nio-8080-exec-6] o.h.type.descriptor.sql.BasicBinder      : binding parameter [2] as [VARCHAR] - []
2025-10-04 07:25:21.629 TRACE 8740 --- [http-nio-8080-exec-6] o.h.type.descriptor.sql.BasicBinder      : binding parameter [3] as [VARCHAR] - [Антон]
2025-10-04 07:25:21.629 TRACE 8740 --- [http-nio-8080-exec-6] o.h.type.descriptor.sql.BasicBinder      : binding parameter [4] as [VARCHAR] - [$2a$10$LEhDEi5Xe1YNAEMpO3NJ6.JLoyGZjNkJteg7s.Xn5ahQjSOghQUKe]
2025-10-04 07:25:21.629 TRACE 8740 --- [http-nio-8080-exec-6] o.h.type.descriptor.sql.BasicBinder      : binding parameter [5] as [VARCHAR] - [Иванов]
2025-10-04 07:25:21.629 TRACE 8740 --- [http-nio-8080-exec-6] o.h.type.descriptor.sql.BasicBinder      : binding parameter [6] as [VARCHAR] - [admin1]
2025-10-04 07:25:21.632  INFO 8740 --- [http-nio-8080-exec-6] r.k.s.b.demo.service.UserServiceImpl     : Пользователь успешно создан: admin1 (ID: 23) с ролями: [ROLE_USER]
2025-10-04 07:25:21.635 DEBUG 8740 --- [http-nio-8080-exec-6] org.hibernate.SQL                        : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2025-10-04 07:25:21.635 TRACE 8740 --- [http-nio-8080-exec-6] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [23]
2025-10-04 07:25:21.635 TRACE 8740 --- [http-nio-8080-exec-6] o.h.type.descriptor.sql.BasicBinder      : binding parameter [2] as [BIGINT] - [1]
2025-10-04 07:25:21.641 DEBUG 8740 --- [http-nio-8080-exec-6] o.s.web.servlet.view.RedirectView        : View name 'redirect:', model {}
2025-10-04 07:25:21.641 DEBUG 8740 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 302 FOUND
2025-10-04 07:25:21.650 DEBUG 8740 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/admin", parameters={}
2025-10-04 07:25:21.651 DEBUG 8740 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#adminPage(Model)
2025-10-04 07:25:21.651 DEBUG 8740 --- [http-nio-8080-exec-7] r.k.s.b.demo.service.UserServiceImpl     : Запрос всех пользователей
2025-10-04 07:25:21.651 DEBUG 8740 --- [http-nio-8080-exec-7] org.hibernate.SQL                        : 
    select
        user0_.id as id1_2_,
        user0_.age as age2_2_,
        user0_.email as email3_2_,
        user0_.name as name4_2_,
        user0_.password as password5_2_,
        user0_.surname as surname6_2_,
        user0_.username as username7_2_ 
    from
        users user0_
2025-10-04 07:25:21.653 DEBUG 8740 --- [http-nio-8080-exec-7] org.hibernate.SQL                        : 
    select
        roles0_.user_id as user_id1_1_0_,
        roles0_.role_id as role_id2_1_0_,
        role1_.id as id1_0_1_,
        role1_.name as name2_0_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-10-04 07:25:21.653 TRACE 8740 --- [http-nio-8080-exec-7] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [23]
2025-10-04 07:25:21.654 DEBUG 8740 --- [http-nio-8080-exec-7] org.hibernate.SQL                        : 
    select
        roles0_.user_id as user_id1_1_0_,
        roles0_.role_id as role_id2_1_0_,
        role1_.id as id1_0_1_,
        role1_.name as name2_0_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-10-04 07:25:21.654 TRACE 8740 --- [http-nio-8080-exec-7] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [20]
2025-10-04 07:25:21.655 DEBUG 8740 --- [http-nio-8080-exec-7] org.hibernate.SQL                        : 
    select
        roles0_.user_id as user_id1_1_0_,
        roles0_.role_id as role_id2_1_0_,
        role1_.id as id1_0_1_,
        role1_.name as name2_0_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-10-04 07:25:21.655 TRACE 8740 --- [http-nio-8080-exec-7] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [18]
2025-10-04 07:25:21.656 DEBUG 8740 --- [http-nio-8080-exec-7] org.hibernate.SQL                        : 
    select
        roles0_.user_id as user_id1_1_0_,
        roles0_.role_id as role_id2_1_0_,
        role1_.id as id1_0_1_,
        role1_.name as name2_0_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-10-04 07:25:21.656 TRACE 8740 --- [http-nio-8080-exec-7] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [17]
2025-10-04 07:25:21.656 DEBUG 8740 --- [http-nio-8080-exec-7] org.hibernate.SQL                        : 
    select
        roles0_.user_id as user_id1_1_0_,
        roles0_.role_id as role_id2_1_0_,
        role1_.id as id1_0_1_,
        role1_.name as name2_0_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-10-04 07:25:21.656 TRACE 8740 --- [http-nio-8080-exec-7] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [15]
2025-10-04 07:25:21.657 DEBUG 8740 --- [http-nio-8080-exec-7] org.hibernate.SQL                        : 
    select
        roles0_.user_id as user_id1_1_0_,
        roles0_.role_id as role_id2_1_0_,
        role1_.id as id1_0_1_,
        role1_.name as name2_0_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-10-04 07:25:21.657 TRACE 8740 --- [http-nio-8080-exec-7] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [14]
2025-10-04 07:25:21.657 DEBUG 8740 --- [http-nio-8080-exec-7] org.hibernate.SQL                        : 
    select
        roles0_.user_id as user_id1_1_0_,
        roles0_.role_id as role_id2_1_0_,
        role1_.id as id1_0_1_,
        role1_.name as name2_0_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-10-04 07:25:21.657 TRACE 8740 --- [http-nio-8080-exec-7] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [13]
2025-10-04 07:25:21.658 DEBUG 8740 --- [http-nio-8080-exec-7] r.k.s.b.demo.service.UserServiceImpl     : Найдено пользователей: 7
2025-10-04 07:25:21.659 DEBUG 8740 --- [http-nio-8080-exec-7] o.s.w.s.v.ContentNegotiatingViewResolver : Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8]
2025-10-04 07:25:21.669 DEBUG 8740 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-10-04 07:25:28.544 DEBUG 8740 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/admin/editUser?id=13", parameters={masked}
2025-10-04 07:25:28.545 DEBUG 8740 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#showEditUserForm(Long, Model)
2025-10-04 07:25:28.546 DEBUG 8740 --- [http-nio-8080-exec-8] r.k.s.b.demo.service.UserServiceImpl     : Запрос пользователя по ID: 13
2025-10-04 07:25:28.548 DEBUG 8740 --- [http-nio-8080-exec-8] org.hibernate.SQL                        : 
    select
        user0_.id as id1_2_0_,
        user0_.age as age2_2_0_,
        user0_.email as email3_2_0_,
        user0_.name as name4_2_0_,
        user0_.password as password5_2_0_,
        user0_.surname as surname6_2_0_,
        user0_.username as username7_2_0_,
        roles1_.user_id as user_id1_1_1_,
        role2_.id as role_id2_1_1_,
        role2_.id as id1_0_2_,
        role2_.name as name2_0_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-10-04 07:25:28.548 TRACE 8740 --- [http-nio-8080-exec-8] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [13]
2025-10-04 07:25:28.549 DEBUG 8740 --- [http-nio-8080-exec-8] r.k.s.b.demo.service.UserServiceImpl     : Пользователь найден: anton (ID: 13)
2025-10-04 07:25:28.551 DEBUG 8740 --- [http-nio-8080-exec-8] o.s.w.s.v.ContentNegotiatingViewResolver : Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8]
2025-10-04 07:25:28.558 DEBUG 8740 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-10-04 07:25:33.051 DEBUG 8740 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/admin", parameters={}
2025-10-04 07:25:33.051 DEBUG 8740 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#adminPage(Model)
2025-10-04 07:25:33.052 DEBUG 8740 --- [http-nio-8080-exec-9] r.k.s.b.demo.service.UserServiceImpl     : Запрос всех пользователей
2025-10-04 07:25:33.052 DEBUG 8740 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : 
    select
        user0_.id as id1_2_,
        user0_.age as age2_2_,
        user0_.email as email3_2_,
        user0_.name as name4_2_,
        user0_.password as password5_2_,
        user0_.surname as surname6_2_,
        user0_.username as username7_2_ 
    from
        users user0_
2025-10-04 07:25:33.053 DEBUG 8740 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : 
    select
        roles0_.user_id as user_id1_1_0_,
        roles0_.role_id as role_id2_1_0_,
        role1_.id as id1_0_1_,
        role1_.name as name2_0_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-10-04 07:25:33.053 TRACE 8740 --- [http-nio-8080-exec-9] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [23]
2025-10-04 07:25:33.054 DEBUG 8740 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : 
    select
        roles0_.user_id as user_id1_1_0_,
        roles0_.role_id as role_id2_1_0_,
        role1_.id as id1_0_1_,
        role1_.name as name2_0_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-10-04 07:25:33.054 TRACE 8740 --- [http-nio-8080-exec-9] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [20]
2025-10-04 07:25:33.055 DEBUG 8740 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : 
    select
        roles0_.user_id as user_id1_1_0_,
        roles0_.role_id as role_id2_1_0_,
        role1_.id as id1_0_1_,
        role1_.name as name2_0_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-10-04 07:25:33.055 TRACE 8740 --- [http-nio-8080-exec-9] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [18]
2025-10-04 07:25:33.055 DEBUG 8740 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : 
    select
        roles0_.user_id as user_id1_1_0_,
        roles0_.role_id as role_id2_1_0_,
        role1_.id as id1_0_1_,
        role1_.name as name2_0_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-10-04 07:25:33.055 TRACE 8740 --- [http-nio-8080-exec-9] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [17]
2025-10-04 07:25:33.056 DEBUG 8740 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : 
    select
        roles0_.user_id as user_id1_1_0_,
        roles0_.role_id as role_id2_1_0_,
        role1_.id as id1_0_1_,
        role1_.name as name2_0_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-10-04 07:25:33.056 TRACE 8740 --- [http-nio-8080-exec-9] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [15]
2025-10-04 07:25:33.056 DEBUG 8740 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : 
    select
        roles0_.user_id as user_id1_1_0_,
        roles0_.role_id as role_id2_1_0_,
        role1_.id as id1_0_1_,
        role1_.name as name2_0_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-10-04 07:25:33.056 TRACE 8740 --- [http-nio-8080-exec-9] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [14]
2025-10-04 07:25:33.057 DEBUG 8740 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : 
    select
        roles0_.user_id as user_id1_1_0_,
        roles0_.role_id as role_id2_1_0_,
        role1_.id as id1_0_1_,
        role1_.name as name2_0_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-10-04 07:25:33.057 TRACE 8740 --- [http-nio-8080-exec-9] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [13]
2025-10-04 07:25:33.057 DEBUG 8740 --- [http-nio-8080-exec-9] r.k.s.b.demo.service.UserServiceImpl     : Найдено пользователей: 7
2025-10-04 07:25:33.058 DEBUG 8740 --- [http-nio-8080-exec-9] o.s.w.s.v.ContentNegotiatingViewResolver : Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8]
2025-10-04 07:25:33.069 DEBUG 8740 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-10-04 07:25:38.596 DEBUG 8740 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/admin/editUser?id=23", parameters={masked}
2025-10-04 07:25:38.596 DEBUG 8740 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#showEditUserForm(Long, Model)
2025-10-04 07:25:38.597 DEBUG 8740 --- [http-nio-8080-exec-10] r.k.s.b.demo.service.UserServiceImpl     : Запрос пользователя по ID: 23
2025-10-04 07:25:38.597 DEBUG 8740 --- [http-nio-8080-exec-10] org.hibernate.SQL                        : 
    select
        user0_.id as id1_2_0_,
        user0_.age as age2_2_0_,
        user0_.email as email3_2_0_,
        user0_.name as name4_2_0_,
        user0_.password as password5_2_0_,
        user0_.surname as surname6_2_0_,
        user0_.username as username7_2_0_,
        roles1_.user_id as user_id1_1_1_,
        role2_.id as role_id2_1_1_,
        role2_.id as id1_0_2_,
        role2_.name as name2_0_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-10-04 07:25:38.597 TRACE 8740 --- [http-nio-8080-exec-10] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [23]
2025-10-04 07:25:38.598 DEBUG 8740 --- [http-nio-8080-exec-10] r.k.s.b.demo.service.UserServiceImpl     : Пользователь найден: admin1 (ID: 23)
2025-10-04 07:25:38.599 DEBUG 8740 --- [http-nio-8080-exec-10] o.s.w.s.v.ContentNegotiatingViewResolver : Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8]
2025-10-04 07:25:38.601 DEBUG 8740 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-10-04 07:25:40.626 DEBUG 8740 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/admin", parameters={}
2025-10-04 07:25:40.627 DEBUG 8740 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#adminPage(Model)
2025-10-04 07:25:40.628 DEBUG 8740 --- [http-nio-8080-exec-1] r.k.s.b.demo.service.UserServiceImpl     : Запрос всех пользователей
2025-10-04 07:25:40.628 DEBUG 8740 --- [http-nio-8080-exec-1] org.hibernate.SQL                        : 
    select
        user0_.id as id1_2_,
        user0_.age as age2_2_,
        user0_.email as email3_2_,
        user0_.name as name4_2_,
        user0_.password as password5_2_,
        user0_.surname as surname6_2_,
        user0_.username as username7_2_ 
    from
        users user0_
2025-10-04 07:25:40.630 DEBUG 8740 --- [http-nio-8080-exec-1] org.hibernate.SQL                        : 
    select
        roles0_.user_id as user_id1_1_0_,
        roles0_.role_id as role_id2_1_0_,
        role1_.id as id1_0_1_,
        role1_.name as name2_0_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-10-04 07:25:40.630 TRACE 8740 --- [http-nio-8080-exec-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [23]
2025-10-04 07:25:40.631 DEBUG 8740 --- [http-nio-8080-exec-1] org.hibernate.SQL                        : 
    select
        roles0_.user_id as user_id1_1_0_,
        roles0_.role_id as role_id2_1_0_,
        role1_.id as id1_0_1_,
        role1_.name as name2_0_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-10-04 07:25:40.631 TRACE 8740 --- [http-nio-8080-exec-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [20]
2025-10-04 07:25:40.631 DEBUG 8740 --- [http-nio-8080-exec-1] org.hibernate.SQL                        : 
    select
        roles0_.user_id as user_id1_1_0_,
        roles0_.role_id as role_id2_1_0_,
        role1_.id as id1_0_1_,
        role1_.name as name2_0_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-10-04 07:25:40.632 TRACE 8740 --- [http-nio-8080-exec-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [18]
2025-10-04 07:25:40.632 DEBUG 8740 --- [http-nio-8080-exec-1] org.hibernate.SQL                        : 
    select
        roles0_.user_id as user_id1_1_0_,
        roles0_.role_id as role_id2_1_0_,
        role1_.id as id1_0_1_,
        role1_.name as name2_0_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-10-04 07:25:40.632 TRACE 8740 --- [http-nio-8080-exec-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [17]
2025-10-04 07:25:40.632 DEBUG 8740 --- [http-nio-8080-exec-1] org.hibernate.SQL                        : 
    select
        roles0_.user_id as user_id1_1_0_,
        roles0_.role_id as role_id2_1_0_,
        role1_.id as id1_0_1_,
        role1_.name as name2_0_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-10-04 07:25:40.633 TRACE 8740 --- [http-nio-8080-exec-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [15]
2025-10-04 07:25:40.633 DEBUG 8740 --- [http-nio-8080-exec-1] org.hibernate.SQL                        : 
    select
        roles0_.user_id as user_id1_1_0_,
        roles0_.role_id as role_id2_1_0_,
        role1_.id as id1_0_1_,
        role1_.name as name2_0_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-10-04 07:25:40.633 TRACE 8740 --- [http-nio-8080-exec-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [14]
2025-10-04 07:25:40.634 DEBUG 8740 --- [http-nio-8080-exec-1] org.hibernate.SQL                        : 
    select
        roles0_.user_id as user_id1_1_0_,
        roles0_.role_id as role_id2_1_0_,
        role1_.id as id1_0_1_,
        role1_.name as name2_0_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-10-04 07:25:40.634 TRACE 8740 --- [http-nio-8080-exec-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [13]
2025-10-04 07:25:40.634 DEBUG 8740 --- [http-nio-8080-exec-1] r.k.s.b.demo.service.UserServiceImpl     : Найдено пользователей: 7
2025-10-04 07:25:40.635 DEBUG 8740 --- [http-nio-8080-exec-1] o.s.w.s.v.ContentNegotiatingViewResolver : Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8]
2025-10-04 07:25:40.639 DEBUG 8740 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-10-04 07:25:43.663 DEBUG 8740 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : POST "/admin/deleteUser", parameters={masked}
2025-10-04 07:25:43.663 DEBUG 8740 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#deleteUser(Long)
2025-10-04 07:25:43.665  INFO 8740 --- [http-nio-8080-exec-2] r.k.s.b.demo.service.UserServiceImpl     : Попытка удаления пользователя с ID: 23
2025-10-04 07:25:43.665 DEBUG 8740 --- [http-nio-8080-exec-2] r.k.s.b.demo.service.UserServiceImpl     : Запрос пользователя по ID: 23
2025-10-04 07:25:43.665 DEBUG 8740 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : 
    select
        user0_.id as id1_2_0_,
        user0_.age as age2_2_0_,
        user0_.email as email3_2_0_,
        user0_.name as name4_2_0_,
        user0_.password as password5_2_0_,
        user0_.surname as surname6_2_0_,
        user0_.username as username7_2_0_,
        roles1_.user_id as user_id1_1_1_,
        role2_.id as role_id2_1_1_,
        role2_.id as id1_0_2_,
        role2_.name as name2_0_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-10-04 07:25:43.666 TRACE 8740 --- [http-nio-8080-exec-2] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [23]
2025-10-04 07:25:43.666 DEBUG 8740 --- [http-nio-8080-exec-2] r.k.s.b.demo.service.UserServiceImpl     : Пользователь найден: admin1 (ID: 23)
2025-10-04 07:25:43.668  INFO 8740 --- [http-nio-8080-exec-2] r.k.s.b.demo.service.UserServiceImpl     : Пользователь успешно удален: admin1 (ID: 23)
2025-10-04 07:25:43.669 DEBUG 8740 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : 
    delete 
    from
        user_roles 
    where
        user_id=?
2025-10-04 07:25:43.669 TRACE 8740 --- [http-nio-8080-exec-2] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [23]
2025-10-04 07:25:43.670 DEBUG 8740 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : 
    delete 
    from
        users 
    where
        id=?
2025-10-04 07:25:43.670 TRACE 8740 --- [http-nio-8080-exec-2] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [23]
2025-10-04 07:25:43.674 DEBUG 8740 --- [http-nio-8080-exec-2] o.s.web.servlet.view.RedirectView        : View name 'redirect:', model {}
2025-10-04 07:25:43.675 DEBUG 8740 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 302 FOUND
2025-10-04 07:25:43.684 DEBUG 8740 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/admin", parameters={}
2025-10-04 07:25:43.684 DEBUG 8740 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#adminPage(Model)
2025-10-04 07:25:43.685 DEBUG 8740 --- [http-nio-8080-exec-3] r.k.s.b.demo.service.UserServiceImpl     : Запрос всех пользователей
2025-10-04 07:25:43.685 DEBUG 8740 --- [http-nio-8080-exec-3] org.hibernate.SQL                        : 
    select
        user0_.id as id1_2_,
        user0_.age as age2_2_,
        user0_.email as email3_2_,
        user0_.name as name4_2_,
        user0_.password as password5_2_,
        user0_.surname as surname6_2_,
        user0_.username as username7_2_ 
    from
        users user0_
2025-10-04 07:25:43.686 DEBUG 8740 --- [http-nio-8080-exec-3] org.hibernate.SQL                        : 
    select
        roles0_.user_id as user_id1_1_0_,
        roles0_.role_id as role_id2_1_0_,
        role1_.id as id1_0_1_,
        role1_.name as name2_0_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-10-04 07:25:43.686 TRACE 8740 --- [http-nio-8080-exec-3] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [20]
2025-10-04 07:25:43.687 DEBUG 8740 --- [http-nio-8080-exec-3] org.hibernate.SQL                        : 
    select
        roles0_.user_id as user_id1_1_0_,
        roles0_.role_id as role_id2_1_0_,
        role1_.id as id1_0_1_,
        role1_.name as name2_0_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-10-04 07:25:43.687 TRACE 8740 --- [http-nio-8080-exec-3] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [18]
2025-10-04 07:25:43.687 DEBUG 8740 --- [http-nio-8080-exec-3] org.hibernate.SQL                        : 
    select
        roles0_.user_id as user_id1_1_0_,
        roles0_.role_id as role_id2_1_0_,
        role1_.id as id1_0_1_,
        role1_.name as name2_0_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-10-04 07:25:43.687 TRACE 8740 --- [http-nio-8080-exec-3] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [17]
2025-10-04 07:25:43.688 DEBUG 8740 --- [http-nio-8080-exec-3] org.hibernate.SQL                        : 
    select
        roles0_.user_id as user_id1_1_0_,
        roles0_.role_id as role_id2_1_0_,
        role1_.id as id1_0_1_,
        role1_.name as name2_0_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-10-04 07:25:43.688 TRACE 8740 --- [http-nio-8080-exec-3] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [15]
2025-10-04 07:25:43.688 DEBUG 8740 --- [http-nio-8080-exec-3] org.hibernate.SQL                        : 
    select
        roles0_.user_id as user_id1_1_0_,
        roles0_.role_id as role_id2_1_0_,
        role1_.id as id1_0_1_,
        role1_.name as name2_0_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-10-04 07:25:43.688 TRACE 8740 --- [http-nio-8080-exec-3] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [14]
2025-10-04 07:25:43.689 DEBUG 8740 --- [http-nio-8080-exec-3] org.hibernate.SQL                        : 
    select
        roles0_.user_id as user_id1_1_0_,
        roles0_.role_id as role_id2_1_0_,
        role1_.id as id1_0_1_,
        role1_.name as name2_0_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-10-04 07:25:43.689 TRACE 8740 --- [http-nio-8080-exec-3] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [13]
2025-10-04 07:25:43.689 DEBUG 8740 --- [http-nio-8080-exec-3] r.k.s.b.demo.service.UserServiceImpl     : Найдено пользователей: 6
2025-10-04 07:25:43.690 DEBUG 8740 --- [http-nio-8080-exec-3] o.s.w.s.v.ContentNegotiatingViewResolver : Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8]
2025-10-04 07:25:43.695 DEBUG 8740 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-10-04 07:25:49.125 DEBUG 8740 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : POST "/admin/deleteUser", parameters={masked}
2025-10-04 07:25:49.125 DEBUG 8740 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#deleteUser(Long)
2025-10-04 07:25:49.126  INFO 8740 --- [http-nio-8080-exec-4] r.k.s.b.demo.service.UserServiceImpl     : Попытка удаления пользователя с ID: 13
2025-10-04 07:25:49.126 DEBUG 8740 --- [http-nio-8080-exec-4] r.k.s.b.demo.service.UserServiceImpl     : Запрос пользователя по ID: 13
2025-10-04 07:25:49.126 DEBUG 8740 --- [http-nio-8080-exec-4] org.hibernate.SQL                        : 
    select
        user0_.id as id1_2_0_,
        user0_.age as age2_2_0_,
        user0_.email as email3_2_0_,
        user0_.name as name4_2_0_,
        user0_.password as password5_2_0_,
        user0_.surname as surname6_2_0_,
        user0_.username as username7_2_0_,
        roles1_.user_id as user_id1_1_1_,
        role2_.id as role_id2_1_1_,
        role2_.id as id1_0_2_,
        role2_.name as name2_0_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-10-04 07:25:49.127 TRACE 8740 --- [http-nio-8080-exec-4] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [13]
2025-10-04 07:25:49.129 DEBUG 8740 --- [http-nio-8080-exec-4] r.k.s.b.demo.service.UserServiceImpl     : Пользователь найден: anton (ID: 13)
2025-10-04 07:25:49.129  INFO 8740 --- [http-nio-8080-exec-4] r.k.s.b.demo.service.UserServiceImpl     : Пользователь успешно удален: anton (ID: 13)
2025-10-04 07:25:49.130 DEBUG 8740 --- [http-nio-8080-exec-4] org.hibernate.SQL                        : 
    delete 
    from
        user_roles 
    where
        user_id=?
2025-10-04 07:25:49.130 TRACE 8740 --- [http-nio-8080-exec-4] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [13]
2025-10-04 07:25:49.131 DEBUG 8740 --- [http-nio-8080-exec-4] org.hibernate.SQL                        : 
    delete 
    from
        users 
    where
        id=?
2025-10-04 07:25:49.131 TRACE 8740 --- [http-nio-8080-exec-4] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [13]
2025-10-04 07:25:49.135 DEBUG 8740 --- [http-nio-8080-exec-4] o.s.web.servlet.view.RedirectView        : View name 'redirect:', model {}
2025-10-04 07:25:49.135 DEBUG 8740 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 302 FOUND
2025-10-04 07:25:49.145 DEBUG 8740 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/admin", parameters={}
2025-10-04 07:25:49.145 DEBUG 8740 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#adminPage(Model)
2025-10-04 07:25:49.146 DEBUG 8740 --- [http-nio-8080-exec-5] r.k.s.b.demo.service.UserServiceImpl     : Запрос всех пользователей
2025-10-04 07:25:49.146 DEBUG 8740 --- [http-nio-8080-exec-5] org.hibernate.SQL                        : 
    select
        user0_.id as id1_2_,
        user0_.age as age2_2_,
        user0_.email as email3_2_,
        user0_.name as name4_2_,
        user0_.password as password5_2_,
        user0_.surname as surname6_2_,
        user0_.username as username7_2_ 
    from
        users user0_
2025-10-04 07:25:49.147 DEBUG 8740 --- [http-nio-8080-exec-5] org.hibernate.SQL                        : 
    select
        roles0_.user_id as user_id1_1_0_,
        roles0_.role_id as role_id2_1_0_,
        role1_.id as id1_0_1_,
        role1_.name as name2_0_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-10-04 07:25:49.147 TRACE 8740 --- [http-nio-8080-exec-5] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [20]
2025-10-04 07:25:49.148 DEBUG 8740 --- [http-nio-8080-exec-5] org.hibernate.SQL                        : 
    select
        roles0_.user_id as user_id1_1_0_,
        roles0_.role_id as role_id2_1_0_,
        role1_.id as id1_0_1_,
        role1_.name as name2_0_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-10-04 07:25:49.148 TRACE 8740 --- [http-nio-8080-exec-5] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [18]
2025-10-04 07:25:49.148 DEBUG 8740 --- [http-nio-8080-exec-5] org.hibernate.SQL                        : 
    select
        roles0_.user_id as user_id1_1_0_,
        roles0_.role_id as role_id2_1_0_,
        role1_.id as id1_0_1_,
        role1_.name as name2_0_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-10-04 07:25:49.149 TRACE 8740 --- [http-nio-8080-exec-5] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [17]
2025-10-04 07:25:49.149 DEBUG 8740 --- [http-nio-8080-exec-5] org.hibernate.SQL                        : 
    select
        roles0_.user_id as user_id1_1_0_,
        roles0_.role_id as role_id2_1_0_,
        role1_.id as id1_0_1_,
        role1_.name as name2_0_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-10-04 07:25:49.149 TRACE 8740 --- [http-nio-8080-exec-5] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [15]
2025-10-04 07:25:49.149 DEBUG 8740 --- [http-nio-8080-exec-5] org.hibernate.SQL                        : 
    select
        roles0_.user_id as user_id1_1_0_,
        roles0_.role_id as role_id2_1_0_,
        role1_.id as id1_0_1_,
        role1_.name as name2_0_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-10-04 07:25:49.149 TRACE 8740 --- [http-nio-8080-exec-5] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [14]
2025-10-04 07:25:49.150 DEBUG 8740 --- [http-nio-8080-exec-5] r.k.s.b.demo.service.UserServiceImpl     : Найдено пользователей: 5
2025-10-04 07:25:49.151 DEBUG 8740 --- [http-nio-8080-exec-5] o.s.w.s.v.ContentNegotiatingViewResolver : Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8]
2025-10-04 07:25:49.154 DEBUG 8740 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-10-04 07:25:55.381 DEBUG 8740 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/admin/addUser", parameters={}
2025-10-04 07:25:55.381 DEBUG 8740 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#showAddUserForm(Model)
2025-10-04 07:25:55.381 DEBUG 8740 --- [http-nio-8080-exec-7] o.s.w.s.v.ContentNegotiatingViewResolver : Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8]
2025-10-04 07:25:55.383 DEBUG 8740 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-10-04 07:26:21.207 DEBUG 8740 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : POST "/admin/addUser", parameters={masked}
2025-10-04 07:26:21.207 DEBUG 8740 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#addUser(User, List)
2025-10-04 07:26:21.208  INFO 8740 --- [http-nio-8080-exec-8] r.k.s.b.demo.service.UserServiceImpl     : Попытка сохранения нового пользователя с логином: admin1
2025-10-04 07:26:21.209 DEBUG 8740 --- [http-nio-8080-exec-8] org.hibernate.SQL                        : 
    select
        user0_.id as id1_2_,
        user0_.age as age2_2_,
        user0_.email as email3_2_,
        user0_.name as name4_2_,
        user0_.password as password5_2_,
        user0_.surname as surname6_2_,
        user0_.username as username7_2_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-10-04 07:26:21.209 TRACE 8740 --- [http-nio-8080-exec-8] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [VARCHAR] - [admin1]
2025-10-04 07:26:21.278 DEBUG 8740 --- [http-nio-8080-exec-8] r.k.s.b.demo.service.UserServiceImpl     : Обработка ролей пользователя: [ROLE_ADMIN]
2025-10-04 07:26:21.279 DEBUG 8740 --- [http-nio-8080-exec-8] org.hibernate.SQL                        : 
    select
        role0_.id as id1_0_,
        role0_.name as name2_0_ 
    from
        roles role0_ 
    where
        role0_.name=?
2025-10-04 07:26:21.279 TRACE 8740 --- [http-nio-8080-exec-8] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [VARCHAR] - [ROLE_ADMIN]
2025-10-04 07:26:21.280 DEBUG 8740 --- [http-nio-8080-exec-8] r.k.s.b.demo.service.UserServiceImpl     : Установлены управляемые роли: [ROLE_ADMIN]
2025-10-04 07:26:21.280 DEBUG 8740 --- [http-nio-8080-exec-8] org.hibernate.SQL                        : 
    insert 
    into
        users
        (age, email, name, password, surname, username) 
    values
        (?, ?, ?, ?, ?, ?)
2025-10-04 07:26:21.280 TRACE 8740 --- [http-nio-8080-exec-8] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [INTEGER] - [22]
2025-10-04 07:26:21.280 TRACE 8740 --- [http-nio-8080-exec-8] o.h.type.descriptor.sql.BasicBinder      : binding parameter [2] as [VARCHAR] - []
2025-10-04 07:26:21.280 TRACE 8740 --- [http-nio-8080-exec-8] o.h.type.descriptor.sql.BasicBinder      : binding parameter [3] as [VARCHAR] - [Антон]
2025-10-04 07:26:21.281 TRACE 8740 --- [http-nio-8080-exec-8] o.h.type.descriptor.sql.BasicBinder      : binding parameter [4] as [VARCHAR] - [$2a$10$6Bn1zy01iSxhq/E41tjMv.NzZnUdyH67DwAguLMgaFbnq8x4nGK8m]
2025-10-04 07:26:21.281 TRACE 8740 --- [http-nio-8080-exec-8] o.h.type.descriptor.sql.BasicBinder      : binding parameter [5] as [VARCHAR] - [Иванов]
2025-10-04 07:26:21.281 TRACE 8740 --- [http-nio-8080-exec-8] o.h.type.descriptor.sql.BasicBinder      : binding parameter [6] as [VARCHAR] - [admin1]
2025-10-04 07:26:21.281  INFO 8740 --- [http-nio-8080-exec-8] r.k.s.b.demo.service.UserServiceImpl     : Пользователь успешно создан: admin1 (ID: 24) с ролями: [ROLE_ADMIN]
2025-10-04 07:26:21.281 DEBUG 8740 --- [http-nio-8080-exec-8] org.hibernate.SQL                        : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2025-10-04 07:26:21.281 TRACE 8740 --- [http-nio-8080-exec-8] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [24]
2025-10-04 07:26:21.281 TRACE 8740 --- [http-nio-8080-exec-8] o.h.type.descriptor.sql.BasicBinder      : binding parameter [2] as [BIGINT] - [2]
2025-10-04 07:26:21.285 DEBUG 8740 --- [http-nio-8080-exec-8] o.s.web.servlet.view.RedirectView        : View name 'redirect:', model {}
2025-10-04 07:26:21.285 DEBUG 8740 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 302 FOUND
2025-10-04 07:26:21.295 DEBUG 8740 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/admin", parameters={}
2025-10-04 07:26:21.295 DEBUG 8740 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#adminPage(Model)
2025-10-04 07:26:21.295 DEBUG 8740 --- [http-nio-8080-exec-9] r.k.s.b.demo.service.UserServiceImpl     : Запрос всех пользователей
2025-10-04 07:26:21.296 DEBUG 8740 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : 
    select
        user0_.id as id1_2_,
        user0_.age as age2_2_,
        user0_.email as email3_2_,
        user0_.name as name4_2_,
        user0_.password as password5_2_,
        user0_.surname as surname6_2_,
        user0_.username as username7_2_ 
    from
        users user0_
2025-10-04 07:26:21.297 DEBUG 8740 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : 
    select
        roles0_.user_id as user_id1_1_0_,
        roles0_.role_id as role_id2_1_0_,
        role1_.id as id1_0_1_,
        role1_.name as name2_0_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-10-04 07:26:21.297 TRACE 8740 --- [http-nio-8080-exec-9] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [24]
2025-10-04 07:26:21.297 DEBUG 8740 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : 
    select
        roles0_.user_id as user_id1_1_0_,
        roles0_.role_id as role_id2_1_0_,
        role1_.id as id1_0_1_,
        role1_.name as name2_0_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-10-04 07:26:21.297 TRACE 8740 --- [http-nio-8080-exec-9] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [20]
2025-10-04 07:26:21.298 DEBUG 8740 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : 
    select
        roles0_.user_id as user_id1_1_0_,
        roles0_.role_id as role_id2_1_0_,
        role1_.id as id1_0_1_,
        role1_.name as name2_0_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-10-04 07:26:21.298 TRACE 8740 --- [http-nio-8080-exec-9] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [18]
2025-10-04 07:26:21.298 DEBUG 8740 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : 
    select
        roles0_.user_id as user_id1_1_0_,
        roles0_.role_id as role_id2_1_0_,
        role1_.id as id1_0_1_,
        role1_.name as name2_0_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-10-04 07:26:21.298 TRACE 8740 --- [http-nio-8080-exec-9] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [17]
2025-10-04 07:26:21.299 DEBUG 8740 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : 
    select
        roles0_.user_id as user_id1_1_0_,
        roles0_.role_id as role_id2_1_0_,
        role1_.id as id1_0_1_,
        role1_.name as name2_0_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-10-04 07:26:21.299 TRACE 8740 --- [http-nio-8080-exec-9] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [15]
2025-10-04 07:26:21.299 DEBUG 8740 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : 
    select
        roles0_.user_id as user_id1_1_0_,
        roles0_.role_id as role_id2_1_0_,
        role1_.id as id1_0_1_,
        role1_.name as name2_0_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-10-04 07:26:21.299 TRACE 8740 --- [http-nio-8080-exec-9] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [14]
2025-10-04 07:26:21.300 DEBUG 8740 --- [http-nio-8080-exec-9] r.k.s.b.demo.service.UserServiceImpl     : Найдено пользователей: 6
2025-10-04 07:26:21.300 DEBUG 8740 --- [http-nio-8080-exec-9] o.s.w.s.v.ContentNegotiatingViewResolver : Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8]
2025-10-04 07:26:21.304 DEBUG 8740 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-10-04 07:26:26.901 DEBUG 8740 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/login?logout", parameters={masked}
2025-10-04 07:26:26.901 DEBUG 8740 --- [http-nio-8080-exec-1] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped to ParameterizableViewController [view="login"]
2025-10-04 07:26:26.901 DEBUG 8740 --- [http-nio-8080-exec-1] o.s.w.s.v.ContentNegotiatingViewResolver : Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8]
2025-10-04 07:26:26.903 DEBUG 8740 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-10-04 07:26:35.909 DEBUG 8740 --- [http-nio-8080-exec-2] r.k.s.b.demo.service.UserServiceImpl     : Попытка загрузки пользователя по логину: admin1
2025-10-04 07:26:35.909 DEBUG 8740 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : 
    select
        user0_.id as id1_2_,
        user0_.age as age2_2_,
        user0_.email as email3_2_,
        user0_.name as name4_2_,
        user0_.password as password5_2_,
        user0_.surname as surname6_2_,
        user0_.username as username7_2_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-10-04 07:26:35.910 TRACE 8740 --- [http-nio-8080-exec-2] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [VARCHAR] - [admin1]
2025-10-04 07:26:35.911 DEBUG 8740 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : 
    select
        roles0_.user_id as user_id1_1_0_,
        roles0_.role_id as role_id2_1_0_,
        role1_.id as id1_0_1_,
        role1_.name as name2_0_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-10-04 07:26:35.911 TRACE 8740 --- [http-nio-8080-exec-2] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [24]
2025-10-04 07:26:35.912 DEBUG 8740 --- [http-nio-8080-exec-2] r.k.s.b.demo.service.UserServiceImpl     : Пользователь найден: admin1 (роли: [ROLE_ADMIN])
2025-10-04 07:26:35.989 DEBUG 8740 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/admin", parameters={}
2025-10-04 07:26:35.989 DEBUG 8740 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#adminPage(Model)
2025-10-04 07:26:35.990 DEBUG 8740 --- [http-nio-8080-exec-3] r.k.s.b.demo.service.UserServiceImpl     : Запрос всех пользователей
2025-10-04 07:26:35.990 DEBUG 8740 --- [http-nio-8080-exec-3] org.hibernate.SQL                        : 
    select
        user0_.id as id1_2_,
        user0_.age as age2_2_,
        user0_.email as email3_2_,
        user0_.name as name4_2_,
        user0_.password as password5_2_,
        user0_.surname as surname6_2_,
        user0_.username as username7_2_ 
    from
        users user0_
2025-10-04 07:26:35.991 DEBUG 8740 --- [http-nio-8080-exec-3] org.hibernate.SQL                        : 
    select
        roles0_.user_id as user_id1_1_0_,
        roles0_.role_id as role_id2_1_0_,
        role1_.id as id1_0_1_,
        role1_.name as name2_0_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-10-04 07:26:35.991 TRACE 8740 --- [http-nio-8080-exec-3] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [24]
2025-10-04 07:26:35.992 DEBUG 8740 --- [http-nio-8080-exec-3] org.hibernate.SQL                        : 
    select
        roles0_.user_id as user_id1_1_0_,
        roles0_.role_id as role_id2_1_0_,
        role1_.id as id1_0_1_,
        role1_.name as name2_0_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-10-04 07:26:35.992 TRACE 8740 --- [http-nio-8080-exec-3] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [20]
2025-10-04 07:26:35.993 DEBUG 8740 --- [http-nio-8080-exec-3] org.hibernate.SQL                        : 
    select
        roles0_.user_id as user_id1_1_0_,
        roles0_.role_id as role_id2_1_0_,
        role1_.id as id1_0_1_,
        role1_.name as name2_0_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-10-04 07:26:35.993 TRACE 8740 --- [http-nio-8080-exec-3] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [18]
2025-10-04 07:26:35.994 DEBUG 8740 --- [http-nio-8080-exec-3] org.hibernate.SQL                        : 
    select
        roles0_.user_id as user_id1_1_0_,
        roles0_.role_id as role_id2_1_0_,
        role1_.id as id1_0_1_,
        role1_.name as name2_0_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-10-04 07:26:35.994 TRACE 8740 --- [http-nio-8080-exec-3] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [17]
2025-10-04 07:26:35.994 DEBUG 8740 --- [http-nio-8080-exec-3] org.hibernate.SQL                        : 
    select
        roles0_.user_id as user_id1_1_0_,
        roles0_.role_id as role_id2_1_0_,
        role1_.id as id1_0_1_,
        role1_.name as name2_0_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-10-04 07:26:35.994 TRACE 8740 --- [http-nio-8080-exec-3] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [15]
2025-10-04 07:26:35.995 DEBUG 8740 --- [http-nio-8080-exec-3] org.hibernate.SQL                        : 
    select
        roles0_.user_id as user_id1_1_0_,
        roles0_.role_id as role_id2_1_0_,
        role1_.id as id1_0_1_,
        role1_.name as name2_0_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-10-04 07:26:35.995 TRACE 8740 --- [http-nio-8080-exec-3] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [14]
2025-10-04 07:26:35.995 DEBUG 8740 --- [http-nio-8080-exec-3] r.k.s.b.demo.service.UserServiceImpl     : Найдено пользователей: 6
2025-10-04 07:26:35.996 DEBUG 8740 --- [http-nio-8080-exec-3] o.s.w.s.v.ContentNegotiatingViewResolver : Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8]
2025-10-04 07:26:35.999 DEBUG 8740 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-10-04 07:27:04.250 DEBUG 8740 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/login?logout", parameters={masked}
2025-10-04 07:27:04.251 DEBUG 8740 --- [http-nio-8080-exec-6] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped to ParameterizableViewController [view="login"]
2025-10-04 07:27:04.251 DEBUG 8740 --- [http-nio-8080-exec-6] o.s.w.s.v.ContentNegotiatingViewResolver : Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8]
2025-10-04 07:27:04.252 DEBUG 8740 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-10-04 07:27:14.718 DEBUG 8740 --- [http-nio-8080-exec-7] r.k.s.b.demo.service.UserServiceImpl     : Попытка загрузки пользователя по логину: user
2025-10-04 07:27:14.718 DEBUG 8740 --- [http-nio-8080-exec-7] org.hibernate.SQL                        : 
    select
        user0_.id as id1_2_,
        user0_.age as age2_2_,
        user0_.email as email3_2_,
        user0_.name as name4_2_,
        user0_.password as password5_2_,
        user0_.surname as surname6_2_,
        user0_.username as username7_2_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-10-04 07:27:14.718 TRACE 8740 --- [http-nio-8080-exec-7] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [VARCHAR] - [user]
2025-10-04 07:27:14.719 DEBUG 8740 --- [http-nio-8080-exec-7] org.hibernate.SQL                        : 
    select
        roles0_.user_id as user_id1_1_0_,
        roles0_.role_id as role_id2_1_0_,
        role1_.id as id1_0_1_,
        role1_.name as name2_0_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-10-04 07:27:14.719 TRACE 8740 --- [http-nio-8080-exec-7] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [14]
2025-10-04 07:27:14.720 DEBUG 8740 --- [http-nio-8080-exec-7] r.k.s.b.demo.service.UserServiceImpl     : Пользователь найден: user (роли: [ROLE_USER])
2025-10-04 07:27:14.801 DEBUG 8740 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/user", parameters={}
2025-10-04 07:27:14.801 DEBUG 8740 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to ru.kata.spring.boot_security.demo.controller.UserController#userProfile(User, Model)
2025-10-04 07:27:14.803 DEBUG 8740 --- [http-nio-8080-exec-8] o.s.w.s.v.ContentNegotiatingViewResolver : Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8]
2025-10-04 07:27:14.811 DEBUG 8740 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-10-04 07:27:20.100 DEBUG 8740 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/login?logout", parameters={masked}
2025-10-04 07:27:20.100 DEBUG 8740 --- [http-nio-8080-exec-10] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped to ParameterizableViewController [view="login"]
2025-10-04 07:27:20.101 DEBUG 8740 --- [http-nio-8080-exec-10] o.s.w.s.v.ContentNegotiatingViewResolver : Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8]
2025-10-04 07:27:20.102 DEBUG 8740 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-10-04 07:27:25.095  INFO 8740 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-10-04 07:27:25.096  INFO 8740 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-10-04 07:27:25.101  INFO 8740 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
